<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dream's Academy-</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/JqgWkCg/placeholder.png">
    <!-- Google Fonts: Hind Siluri for Bengali -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Google Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />

    <style>
        /* --- General Styles & Variables --- */
        :root {
            --primary-blue: #0a4d68;
            --secondary-blue: #088395;
            --light-blue: #05bfdb;
            --accent-yellow: #ffc107;
            --accent-purple: #4f46e5;
            --background-light: #f8f9fa;
            --text-dark: #212529;
            --text-light: #ffffff;
            --border-color: #dee2e6;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            --card-radius: 12px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: var(--background-light);
            color: var(--text-dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
        }

        .hidden { display: none !important; }

        .btn {
            padding: 10px 25px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .btn-gradient {
            background: linear-gradient(90deg, var(--light-blue), var(--secondary-blue));
            color: var(--text-light);
        }
        .btn-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(8, 131, 149, 0.4);
        }

        .btn-outline {
            background-color: transparent;
            color: var(--secondary-blue);
            border: 2px solid var(--secondary-blue);
        }
        .btn-outline:hover {
            background-color: var(--secondary-blue);
            color: var(--text-light);
        }

        .btn-solid-blue {
            background-color: var(--accent-purple);
            color: var(--text-light);
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border-radius: 8px;
        }
        .btn-solid-blue:hover {
            background-color: #4338ca;
            transform: translateY(-2px);
        }

        /* --- Header & Navigation --- */
        .main-header {
            background-color: var(--text-light);
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .main-header .container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8em;
            font-weight: 700;
            color: var(--primary-blue);
            text-decoration: none;
        }
        
        .logo img {
            max-height: 55px;
            display: block;
        }

        .main-nav ul {
            list-style: none;
            display: flex;
            gap: 30px;
        }

        .main-nav a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 600;
            position: relative;
            padding-bottom: 5px;
        }

        .main-nav a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--secondary-blue);
            transition: width 0.3s ease;
        }

        .main-nav a:hover::after, .main-nav li.active a::after {
            width: 100%;
        }

        .nav-dropdown { position: relative; }
        .nav-dropdown .dropdown-menu {
            display: none;
            position: absolute;
            top: 150%;
            left: 0;
            background: var(--text-light);
            box-shadow: var(--shadow);
            border-radius: var(--card-radius);
            padding: 10px 0;
            min-width: 200px;
        }
        .nav-dropdown:hover .dropdown-menu { display: block; }
        .dropdown-menu a {
            display: block;
            padding: 10px 20px;
        }
        .dropdown-menu a::after { display: none; }
        .dropdown-menu a:hover { background-color: var(--background-light); }

        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-bar {
            position: relative;
        }
        .search-bar input {
            padding: 8px 15px;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            min-width: 250px;
        }

        .header-icons { display: flex; align-items: center; gap: 15px; }
        .header-icons .material-symbols-outlined {
            cursor: pointer;
            font-size: 28px;
            color: var(--primary-blue);
        }

        .profile-icon-wrapper { position: relative; }
        .profile-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--border-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .profile-icon .material-symbols-outlined { font-size: 28px; }

        .profile-dropdown {
            display: none;
            position: absolute;
            top: 55px;
            right: 0;
            width: 280px;
            background: var(--text-light);
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        .profile-dropdown-header {
            padding: 20px;
            background: var(--background-light);
            text-align: center;
        }
        .profile-dropdown-header img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-bottom: 10px;
            object-fit: cover;
        }
        .profile-dropdown-header h4 { margin-bottom: 5px; }
        .profile-dropdown-header p { font-size: 0.9em; color: #6c757d; }

        .profile-dropdown-menu ul { list-style: none; }
        .profile-dropdown-menu li a {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            text-decoration: none;
            color: var(--text-dark);
            border-top: 1px solid var(--border-color);
        }
        .profile-dropdown-menu li a:hover { background: var(--background-light); }
        .profile-dropdown-menu .material-symbols-outlined { color: var(--primary-blue); }
        
        .notification-icon-wrapper {
            position: relative;
        }

        .notification-badge {
            position: absolute;
            top: 2px;
            right: 2px;
            width: 10px;
            height: 10px;
            background-color: #dc3545;
            border-radius: 50%;
            border: 2px solid var(--text-light);
        }

        .notification-dropdown {
            display: none;
            position: absolute;
            top: 55px;
            right: 0;
            width: 360px;
            max-height: 450px;
            background: var(--text-light);
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .notification-dropdown.hidden { display: none; }

        .notification-dropdown-header {
            padding: 15px;
            background: var(--secondary-blue);
            color: var(--text-light);
            flex-shrink: 0;
        }
        .notification-dropdown-header h3 {
             font-size: 1.1em;
             margin: 0;
        }
        
        .notification-list {
            list-style: none;
            overflow-y: auto;
            flex-grow: 1;
        }

        .notification-list-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        .notification-list-item:hover {
            background-color: var(--background-light);
        }
        .notification-list-item:last-child {
            border-bottom: none;
        }
        
        .notification-icon {
            flex-shrink: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #eaf6f6;
        }
        .notification-icon .material-symbols-outlined {
            color: var(--primary-blue);
            font-size: 24px;
        }
         .notification-icon.notice-icon .material-symbols-outlined {
            color: #dc3545; /* Red for notices */
        }
        
        .notification-content p {
            margin: 0;
            font-size: 1em;
            line-height: 1.4;
            color: var(--text-dark);
            font-weight: 500;
        }
        
        .notification-content span.time {
            font-size: 0.8em;
            color: #6c757d;
        }
        .no-notification-message {
            text-align: center;
            padding: 40px 20px;
            color: #6c757d;
        }
        
        /* --- Hero Section --- */
        .hero-section {
            padding: 60px 0;
            background-color: #ffffff;
            overflow: hidden;
        }
        .hero-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            align-items: center;
            gap: 40px;
        }
        .hero-content {
            animation: slideInUp 0.8s ease-out forwards;
        }
        .hero-content h1 {
            font-size: 3.4em;
            line-height: 1.2;
            color: var(--primary-blue);
            margin-bottom: 20px;
            font-weight: 700;
        }
        .hero-content h1 span {
            background: linear-gradient(90deg, var(--light-blue), var(--secondary-blue));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .hero-content p {
            font-size: 1.2em;
            max-width: 550px;
            margin-bottom: 35px;
            color: #495057;
        }
        .hero-buttons .btn {
            margin-right: 15px;
            padding: 12px 30px;
        }

        .hero-image-wrapper {
            text-align: center;
            animation: fadeInRight 1s ease-out forwards;
        }
        .hero-image-wrapper img {
            max-width: 100%;
            height: auto;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        @keyframes fadeInRight {
             from {
                opacity: 0;
                transform: translateX(40px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @media (max-width: 992px) {
            .hero-grid {
                grid-template-columns: 1fr;
                text-align: center;
            }
            .hero-content {
                order: 2;
            }
            .hero-image-wrapper {
                order: 1;
                margin-bottom: 30px;
            }
            .hero-content p {
                margin-left: auto;
                margin-right: auto;
            }
             .hero-content h1 {
                font-size: 2.8em;
            }
        }

        /* --- Common Section Styles --- */
        .section {
            padding: 60px 0;
        }
        .section-title {
            text-align: center;
            margin-bottom: 50px;
            font-size: 2.5em;
            color: var(--primary-blue);
            font-weight: 700;
        }

        /* --- About Section --- */
        .about-section {
            background-color: var(--text-light);
        }
        .about-grid {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            align-items: center;
            gap: 50px;
        }
        .about-image img {
            width: 100%;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
        }
        .about-content h3 {
            font-size: 2em;
            color: var(--primary-blue);
            margin-bottom: 15px;
        }
        .about-content p {
            margin-bottom: 25px;
            color: #495057;
        }
        .about-features {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }
        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }
        .feature-item .icon {
            font-size: 28px;
            color: var(--secondary-blue);
            background-color: #eaf6f6;
            padding: 12px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .feature-item h4 {
            font-size: 1.1em;
            margin-bottom: 5px;
        }
        .feature-item p {
            font-size: 0.9em;
            line-height: 1.5;
            margin-bottom: 0;
            color: #6c757d;
        }
        @media (max-width: 992px) {
            .about-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
        }
        @media (max-width: 576px) {
            .about-features {
                grid-template-columns: 1fr;
            }
        }

        /* START: SLIDER STYLES FOR TRUST SCREENSHOT SECTION */
        .trust-section {
            background-color: var(--text-light);
        }
        .slider-wrapper {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            overflow: hidden;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
        }
        .screenshot-grid {
            display: flex;
            transition: transform 0.5s ease-in-out;
        }
        .screenshot-item {
            flex: 0 0 100%;
            min-width: 100%;
            box-sizing: border-box;
            background-color: var(--text-light);
        }
        .screenshot-item img {
            width: 100%;
            height: auto;
            display: block;
        }
        .slider-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background-color: rgba(10, 77, 104, 0.6);
            color: white;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            z-index: 10;
            font-size: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease;
        }
        .slider-btn:hover {
            background-color: rgba(10, 77, 104, 0.9);
        }
        .slider-btn.prev-btn {
            left: 15px;
        }
        .slider-btn.next-btn {
            right: 15px;
        }
        /* END: SLIDER STYLES FOR TRUST SCREENSHOT SECTION */

        /* --- Services Section --- */
        .services-section {
            background-color: var(--background-light); /* Changed for visual separation */
        }
        .service-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 30px;
            justify-items: center;
        }
        .service-card {
            background-color: var(--text-light);
            border: 2px solid var(--border-color);
            border-radius: var(--card-radius);
            padding: 30px;
            width: 100%;
            max-width: 380px;
            box-shadow: var(--shadow);
            transition: all 0.3s ease;
            border-top: 5px solid var(--accent-purple);
        }
        .service-card:hover {
            transform: translateY(-8px);
            border-color: var(--accent-purple);
        }
        .service-card h3 {
            font-size: 1.8em;
            color: var(--text-dark);
            font-weight: 700;
        }
        .service-card .plan-description {
            color: #6c757d;
            margin: 10px 0 25px;
            min-height: 50px;
        }
        .pricing-info {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }
        .pricing-info .old-price {
            text-decoration: line-through;
            color: #adb5bd;
            font-size: 1.2em;
        }
        .pricing-info .save-badge {
            background-color: #d1fae5;
            color: #065f46;
            padding: 5px 12px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 0.9em;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .save-badge .material-symbols-outlined {
            font-size: 1em;
        }
        .current-price {
            margin-bottom: 25px;
        }
        .current-price .price-amount {
            font-size: 3em;
            font-weight: 700;
            color: var(--text-dark);
        }
        .current-price .price-duration {
            font-size: 1.2em;
            color: #6c757d;
            font-weight: 500;
        }
        .service-features {
            list-style: none;
            margin: 30px 0;
            padding-top: 30px;
            border-top: 1px solid var(--border-color);
        }
        .service-features li {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            font-weight: 500;
            color: #344054;
        }
        .service-features .material-symbols-outlined {
            color: var(--accent-purple);
            font-weight: 600;
        }

        /* --- Courses Section --- */
        .courses-section {
            padding: 60px 0;
        }
        .course-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        .course-card {
            background: var(--text-light);
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .course-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        .card-thumbnail {
            position: relative;
        }
        .card-thumbnail img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            display: block;
        }
        .top-course-tag {
            position: absolute;
            top: 15px;
            left: 15px;
            background-color: var(--accent-yellow);
            color: var(--text-dark);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            font-weight: 600;
        }
        .card-content {
            padding: 20px;
        }
        .card-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .category-tag {
            background-color: #eaf6f6;
            color: var(--secondary-blue);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 500;
        }
        .rating {
            color: var(--accent-yellow);
            font-size: 0.9em;
        }
        .course-card h3 {
            font-size: 1.3em;
            margin-bottom: 10px;
            height: 50px;
        }
        .instructor, .course-info-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #6c757d;
            font-size: 0.9em;
        }
        .course-info {
            display: flex;
            gap: 20px;
            margin: 15px 0;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }
        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .price {
            font-size: 1.5em;
            font-weight: 700;
            color: var(--primary-blue);
        }

        /* --- START: UPDATED MODAL & INPUT STYLES --- */
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(33, 37, 41, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
        }

        .login-modal:not(.hidden) {
            opacity: 1;
            visibility: visible;
        }

        .login-modal:not(.hidden) .login-card {
            animation: modalZoomIn 0.4s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
        }

        @keyframes modalZoomIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .login-card {
            background: var(--text-light);
            border-radius: var(--card-radius);
            width: 90%;
            max-width: 850px;
            display: flex;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            padding: 0;
            text-align: left;
            transform: scale(0.95); /* Initial state for animation */
        }
        
        .close-modal-btn {
            position: absolute;
            top: 10px;
            right: 20px;
            background: transparent;
            border: none;
            font-size: 2.5em;
            color: #aaa;
            cursor: pointer;
            line-height: 1;
            padding: 0;
            transition: color 0.3s ease;
        }
        .close-modal-btn:hover {
            color: var(--text-dark);
        }

        .modal-info-panel {
            width: 45%;
            padding: 50px 40px;
            background: linear-gradient(135deg, var(--primary-blue), var(--secondary-blue));
            color: var(--text-light);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .modal-info-panel .logo {
            color: var(--text-light);
            margin-bottom: 25px;
        }

        .modal-info-panel h2 {
            font-size: 2.2em;
            margin-bottom: 15px;
            line-height: 1.3;
        }
        .modal-info-panel p {
            font-size: 1.1em;
            line-height: 1.7;
            opacity: 0.9;
        }

        .modal-form-panel {
            width: 55%;
            padding: 50px 40px;
            position: relative;
        }

        .modal-form-panel h2 {
            color: var(--primary-blue);
            font-size: 2em;
            margin-bottom: 30px;
            font-weight: 700;
        }

        .input-group {
            position: relative;
            margin-bottom: 25px;
        }
        
        /* New Floating Label Styles */
        .input-group .material-symbols-outlined {
            position: absolute;
            left: 15px;
            top: 15px;
            color: #adb5bd;
            transition: color 0.3s ease;
        }
        
        .input-group input, .input-group select {
            width: 100%;
            padding: 15px 15px 15px 50px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: 'Hind Siliguri', sans-serif;
            font-size: 1em;
            transition: all 0.3s ease;
            background-color: var(--background-light);
            color: var(--text-dark);
        }

        .input-group input::placeholder {
          color: transparent; /* Hide placeholder by default */
        }

        .input-group label {
            position: absolute;
            left: 50px;
            top: 16px;
            color: #8a94a1;
            pointer-events: none;
            transition: all 0.3s ease;
        }

        .input-group input:focus,
        .input-group input:not(:placeholder-shown) {
            outline: none;
            border-color: var(--secondary-blue);
            background-color: var(--text-light);
            box-shadow: 0 0 0 3px rgba(8, 131, 149, 0.15);
        }

        .input-group input:focus + label,
        .input-group input:not(:placeholder-shown) + label {
            top: -10px;
            left: 45px;
            font-size: 0.85em;
            color: var(--secondary-blue);
            background-color: var(--text-light);
            padding: 0 5px;
        }
        
        .input-group input:focus ~ .material-symbols-outlined {
            color: var(--secondary-blue);
        }

        .password-toggle {
            position: absolute;
            right: 15px;
            top: 16px;
            cursor: pointer;
        }

        .login-links {
            text-align: right;
            margin-top: -15px;
            margin-bottom: 25px;
        }

        .login-links a {
            color: var(--secondary-blue);
            text-decoration: none;
            font-size: 0.9em;
            font-weight: 500;
        }
        .login-links a:hover {
            text-decoration: underline;
        }
        
        /* Updated Button Styles */
        .modal-form-panel .btn {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            margin-bottom: 25px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .modal-form-panel .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(8, 131, 149, 0.3);
        }
        .modal-form-panel .btn:active {
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(8, 131, 149, 0.3);
        }

        .signup-link {
            text-align: center;
            margin-top: 15px;
            font-weight: 500;
        }

        .signup-link a {
            color: var(--secondary-blue);
            font-weight: 700;
            text-decoration: none;
        }
        .signup-link a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .login-card {
                flex-direction: column;
                max-width: 450px;
                max-height: 90vh;
                overflow-y: auto;
            }
            .modal-info-panel {
                display: none;
            }
            .modal-form-panel {
                width: 100%;
                padding: 40px 25px;
            }
        }
        /* --- END: UPDATED MODAL & INPUT STYLES --- */
        
        /* --- Dashboard Styles --- */
        .dashboard {
            padding: 40px 0;
        }
        .dashboard-container {
            display: flex;
            gap: 30px;
        }
        .dashboard-sidebar {
            width: 280px;
            flex-shrink: 0;
        }
        .sidebar-welcome-card {
            background: var(--text-light);
            padding: 20px;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .sidebar-user { display: flex; align-items: center; gap: 15px; }
        .sidebar-user img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        .sidebar-user h4 { font-size: 1.1em; }
        .sidebar-welcome-card .material-symbols-outlined { color: var(--primary-blue); cursor: pointer; }

        .sidebar-nav {
            background: var(--text-light);
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            padding: 15px 0;
            margin-bottom: 20px;
        }
        .sidebar-nav ul { list-style: none; }
        .sidebar-nav a {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 600;
            border-left: 4px solid transparent;
        }
        .sidebar-nav a:hover {
            background-color: var(--background-light);
        }
        .sidebar-nav li.active a {
            background-color: #eaf6f6;
            color: var(--secondary-blue);
            border-left-color: var(--secondary-blue);
        }

        .countdown-timer {
            background: var(--primary-blue);
            color: var(--text-light);
            padding: 20px;
            border-radius: var(--card-radius);
            text-align: center;
        }
        .countdown-timer h4 { margin-bottom: 15px; }
        #timer { display: flex; justify-content: space-around; }
        .time-block { font-size: 1.5em; font-weight: 700; }
        .time-block span { display: block; font-size: 0.5em; font-weight: 400; opacity: 0.8; }

        .dashboard-content {
            flex-grow: 1;
        }
        .content-card {
            background: var(--text-light);
            padding: 30px;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            overflow-x: auto;
        }
        .content-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        .content-header h2 { font-size: 2em; color: var(--primary-blue); }

        #my-courses-page .course-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }

        .notice-list-public {
            max-width: 800px;
            margin: 0 auto;
        }
        .notice-item {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border: 1px solid var(--border-color);
            display: flex;
            gap: 15px;
            align-items: center;
            background: var(--text-light);
            transition: all 0.3s ease;
        }
        .notice-item:hover {
            border-left: 3px solid var(--secondary-blue);
            background-color: #eaf6f6;
            transform: translateX(5px);
        }
        .notice-item .material-symbols-outlined { color: var(--primary-blue); font-size: 28px; }
        .notice-details p { font-size: 0.9em; color: #6c757d; margin-bottom: 0; }
        .notice-details h4 { margin-bottom: 5px; }

        .class-schedule-table {
            width: 100%;
            border-collapse: collapse;
        }
        .class-schedule-table th, .class-schedule-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            white-space: nowrap;
        }
        .class-schedule-table th { background-color: var(--background-light); }
        .status-tag {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }
        .status-upcoming { background: #eaf6f6; color: var(--secondary-blue); }
        .status-completed { background: #e9ecef; color: #6c757d; }

        .profile-summary {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        .profile-summary h3 { font-size: 1.8em; }

        .profile-avatar-wrapper {
            position: relative;
            width: 100px;
            height: 100px;
            flex-shrink: 0;
        }
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: var(--border-color);
            object-fit: cover;
            transition: opacity 0.3s ease;
        }
        .avatar-upload-label {
            position: absolute;
            bottom: 0;
            right: 0;
            background: var(--primary-blue);
            color: var(--text-light);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            border: 2px solid var(--text-light);
            transition: background-color 0.3s;
        }
        .avatar-upload-label:hover {
            background: var(--secondary-blue);
        }
        .avatar-upload-label .material-symbols-outlined {
            font-size: 18px;
        }

        .upload-in-progress {
            animation: spin 1.5s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .profile-form h4 { font-size: 1.2em; margin-bottom: 20px; }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .form-group {
            position: relative;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }
        .profile-form .btn {
            grid-column: 1 / -1;
            margin-top: 20px;
            width: auto;
            justify-self: start;
        }
        
        #course-curriculum-page .content-header {
            align-items: flex-start;
        }
        
        .back-to-courses-btn {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-dark);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .back-to-courses-btn:hover {
            background: var(--background-light);
            color: var(--primary-blue);
        }

        .curriculum-layout {
            display: grid;
            grid-template-columns: 1.5fr 1fr;
            gap: 30px;
        }
        .video-player-wrapper {
            background: #000;
            border-radius: var(--card-radius);
            overflow: hidden;
            position: relative;
            padding-top: 56.25%; /* 16:9 Aspect Ratio */
            height: 0;
            box-shadow: var(--shadow);
        }
        .video-player-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }
        #video-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--text-dark);
            color: #ccc;
            text-align: center;
            padding: 20px;
        }
        #video-placeholder .material-symbols-outlined {
            font-size: 60px;
            margin-bottom: 15px;
        }
        
        /* === START: NEW STYLES FOR CLASS NOTE === */
        #class-note-container {
            margin-top: 25px;
            background: var(--text-light);
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            padding: 25px;
        }
        #class-note-container.hidden {
            display: none;
        }
        #class-note-container h4 {
            font-size: 1.5em;
            color: var(--primary-blue);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }
        #class-note-container .note-content {
            line-height: 1.7;
            white-space: pre-wrap;
            word-wrap: break-word; 
        }
        #class-note-container .note-content a {
            color: var(--secondary-blue);
            text-decoration: underline;
        }
        /* === END: NEW STYLES FOR CLASS NOTE === */
        
        .curriculum-list-wrapper {
            background: var(--text-light);
            padding: 20px;
            border-radius: var(--card-radius);
            box-shadow: var(--shadow);
            max-height: 600px;
            overflow-y: auto;
        }
        .curriculum-module {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 15px;
            overflow: hidden;
        }
        .module-header {
            padding: 15px;
            background: var(--background-light);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }
        .module-header .material-symbols-outlined {
            transition: transform 0.3s ease;
        }
        .module-header.active .material-symbols-outlined {
            transform: rotate(180deg);
        }
        .module-videos {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }
        .module-videos.show {
           max-height: 500px; /* Adjust as needed */
        }
        .video-item-link {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-top: 1px solid var(--border-color);
            text-decoration: none;
            color: var(--text-dark);
            transition: background-color 0.3s;
            gap: 15px;
        }
        .video-item-link:hover {
            background-color: #eaf6f6;
        }
        .video-item-link.playing {
            background-color: #d1fae5;
            color: #065f46;
            font-weight: 600;
        }
        .video-title-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .video-title-wrapper .material-symbols-outlined {
            font-size: 22px;
        }
        .video-duration {
            font-size: 0.9em;
            color: #6c757d;
            background-color: #e9ecef;
            padding: 3px 8px;
            border-radius: 5px;
        }

        @media (max-width: 1024px) {
            .curriculum-layout {
                grid-template-columns: 1fr;
            }
             .curriculum-list-wrapper {
                max-height: none;
            }
        }

        /* --- Footer --- */
        .main-footer {
            background-color: var(--text-light);
            padding: 60px 0 20px;
            margin-top: 60px;
            border-top: 1px solid var(--border-color);
            position: relative;
        }
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }
        .footer-col h4 {
            margin-bottom: 20px;
            font-size: 1.2em;
            color: var(--primary-blue);
        }
        .footer-col ul { list-style: none; }
        .footer-col li { margin-bottom: 10px; }
        .footer-col a {
            text-decoration: none;
            color: var(--text-dark);
        }
        .footer-col a:hover { color: var(--secondary-blue); }
        .app-download-badge {
            display: inline-block;
            background: #000;
            color: #fff;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
        }
        .social-icons { display: flex; gap: 15px; }
        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #eaf6f6;
            color: var(--secondary-blue);
            display: flex;
            justify-content: center;
            align-items: center;
            text-decoration: none;
            font-size: 1.3em;
        }
        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        #scrollTopBtn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--secondary-blue);
            color: var(--text-light);
            border: none;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        #scrollTopBtn.show {
            opacity: 1;
            visibility: visible;
        }

        /* --- Floating WhatsApp Button --- */
        #floating-whatsapp-btn {
            position: fixed;
            left: 30px;
            bottom: 30px;
            width: 60px;
            height: 60px;
            background-color: #25D366;
            color: var(--text-light);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: var(--shadow);
            z-index: 1002; /* Higher than header and mobile nav */
            text-decoration: none;
            transition: transform 0.3s ease, background-color 0.3s ease;
        }

        #floating-whatsapp-btn .material-symbols-outlined {
            font-size: 30px;
        }

        #floating-whatsapp-btn:hover {
            transform: scale(1.1);
            background-color: #128C7E;
        }

        /* --- Toast Notifications --- */
        #toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            padding: 15px 20px;
            border-radius: 8px;
            color: var(--text-light);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideIn 0.5s ease forwards, fadeOut 0.5s ease 3.5s forwards;
        }

        .toast.success { background-color: #28a745; }
        .toast.error { background-color: #dc3545; }
        .toast.info { background-color: var(--secondary-blue); }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
                transform: translateX(100%);
            }
        }
        
        /* --- Mobile Specific Styles --- */
        .mobile-bottom-nav {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: var(--text-light);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            height: 65px;
            justify-content: space-around;
            align-items: center;
        }

        .mobile-nav-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: var(--primary-blue);
            flex-grow: 1;
            height: 100%;
            font-size: 0.8em;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .mobile-nav-link .material-symbols-outlined {
            font-size: 26px;
            margin-bottom: 2px;
        }

        .mobile-nav-link.active {
            color: var(--secondary-blue);
        }

        .btn-whatsapp-mobile {
            display: none; /* Hide on desktop by default */
        }

        @media (max-width: 768px) {
            .mobile-bottom-nav {
                display: flex;
            }
            body {
                padding-bottom: 70px;
            }
            .main-header .main-nav {
                display: none;
            }
            .main-header .search-bar {
                display: none;
            }

            .hero-section {
                background-color: var(--primary-blue);
                padding: 70px 0;
                text-align: center;
            }
            .hero-grid {
                gap: 20px;
            }
            .hero-content h1 {
                color: var(--text-light);
                font-size: 2.5em;
            }
            .hero-content h1 span {
                background: none;
                -webkit-background-clip: unset;
                -webkit-text-fill-color: unset;
                background-clip: unset;
                color: var(--light-blue);
                font-weight: 700;
            }
            .hero-content p {
                color: #e0e0e0;
                font-size: 1.1em;
                max-width: 90%;
            }
            .hero-image-wrapper {
                display: none;
            }
            .hero-buttons {
                margin-top: 30px;
            }
            .hero-buttons .btn-gradient {
                background: var(--secondary-blue);
            }
            .hero-buttons .btn-outline {
                display: none;
            }
            
            .btn-whatsapp-mobile {
                display: inline-flex; /* Show button on mobile */
                background: #25D366 !important; /* WhatsApp green, !important to override .btn-gradient */
                border: none;
            }
            .btn-whatsapp-mobile:hover {
                background: #128C7E !important; /* Darker green on hover */
            }

            .section-title {
                font-size: 2.1em;
                margin-bottom: 30px;
            }

            .logo {
                font-size: 1.6em;
            }

            .header-right .btn {
                padding: 8px 15px;
                font-size: 0.9em;
            }

            .about-grid {
                text-align: center;
            }
            .about-content {
                text-align: left;
            }
             .about-features {
                text-align: left;
            }

            .dashboard-container {
                flex-direction: column;
            }
            .dashboard-sidebar {
                width: 100%;
            }
            .content-header h2 {
                font-size: 1.6em;
            }

            .profile-form .form-grid {
                grid-template-columns: 1fr;
            }
             .profile-summary {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .footer-grid {
                grid-template-columns: 1fr;
                text-align: center;
            }

            .footer-col ul {
                padding-left: 0;
            }

            .social-icons {
                justify-content: center;
            }
        }
    </style>
</head>
<body>

    <!-- ======================= Header ======================= -->
    <header class="main-header">
        <div class="container">
            <a href="#" class="logo">
                <img id="header-logo-img" src="https://i.ibb.co/JqgWkCg/placeholder.png" alt="Dream's Academy">
            </a>
            <nav class="main-nav">
                <ul>
                    <li class="active"><a href="#home">হোম</a></li>
                    <li><a href="#about">আমাদের সম্পর্কে</a></li>
                     <!-- START: NEW NAV LINK ADDED -->
                    <li><a href="#trust">সাফল্যের চিত্র</a></li>
                    <!-- END: NEW NAV LINK ADDED -->
                    <li><a href="#services">সার্ভিস সমূহ</a></li>
                    <li class="nav-dropdown">
                        <a href="#courses">কোর্স</a>
                        <div class="dropdown-menu">
                            <a href="#">লাইভ কোর্স</a>
                            <a href="#">রেকোর্ডেট কোর্স</a>
                            <a href="#">ফ্রি ক্লাস</a>
                        </div>
                    </li>
                    <li><a href="#noticeboard">নোটিশবোর্ড</a></li>
                </ul>
            </nav>
            <div class="header-right">
                <div class="search-bar">
                    <input type="text" id="course-search-input" placeholder="আপনার কাঙ্ক্ষিত কোর্সটি সার্চ করুন">
                </div>
                <div id="logged-out-view">
                    <button class="btn btn-gradient" id="login-signup-btn">লগ ইন / সাইন আপ →</button>
                </div>
                <div id="logged-in-view" class="header-icons hidden">
                    <div class="notification-icon-wrapper">
                        <span class="material-symbols-outlined" id="notification-icon">notifications</span>
                        <span id="notification-badge" class="notification-badge hidden"></span>
                    </div>
                    <div class="notification-dropdown hidden" id="notification-dropdown">
                        <div class="notification-dropdown-header">
                           <h3>নোটিফিকেশন</h3>
                        </div>
                        <ul class="notification-list" id="notification-list-container">
                           <li class="no-notification-message">কোনো নতুন নোটিফিকেশন নেই।</li>
                        </ul>
                    </div>

                    <div class="profile-icon-wrapper">
                        <div class="profile-icon" id="profile-icon">
                            <span class="material-symbols-outlined">person</span>
                        </div>
                        <div class="profile-dropdown" id="profile-dropdown">
                            <div class="profile-dropdown-header">
                                <img src="https://i.ibb.co/L1LQtBm/default-avatar.png" alt="Avatar">
                                <h4>Md Shafiqul Islam</h4>
                                <p>arafatislamshofiqul@gmail.com</p>
                            </div>
                            <nav class="profile-dropdown-menu">
                                <ul>
                                    <li><a href="#dashboard" id="dashboard-link"><span class="material-symbols-outlined">school</span> স্টুডেন্ট ড্যাশবোর্ড</a></li>
                                    <li><a href="#" id="my-profile-link"><span class="material-symbols-outlined">person</span> আমার প্রোফাইল</a></li>
                                    <li id="admin-panel-link-li" class="hidden"><a href="admin.html" target="_blank"><span class="material-symbols-outlined">admin_panel_settings</span> অ্যাডমিন প্যানেল</a></li>
                                    <li><a href="#" id="logout-btn"><span class="material-symbols-outlined">logout</span> Log Out</a></li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- START: UPDATED LOGIN/SIGNUP MODALS -->
        <div class="login-modal hidden" id="login-modal">
            <div class="login-card">
                <div class="modal-info-panel">
                    <a href="#" class="logo">
                         <img id="header-logo-img-modal" src="https://i.ibb.co/JqgWkCg/placeholder.png" alt="Dream's Academy" style="filter: brightness(0) invert(1); max-height: 45px;">
                    </a>
                    <h2>দক্ষতার জগতে স্বাগতম!</h2>
                    <p>আপনার অ্যাকাউন্টে লগইন করে নতুন কিছু শেখার अद्भुत যাত্রা শুরু করুন।</p>
                </div>
                <div class="modal-form-panel">
                    <button class="close-modal-btn" aria-label="Close">&times;</button>
                    <h2>লগ ইন করুন</h2>
                    <form id="login-form">
                        <div class="input-group">
                            <span class="material-symbols-outlined">mail</span>
                            <input type="email" id="login-email" placeholder="আপনার ইমেইল দিন" required>
                            <label for="login-email">ইমেইল</label>
                        </div>
                        <div class="input-group">
                            <span class="material-symbols-outlined">lock</span>
                            <input type="password" id="login-password" placeholder="পাসওয়ার্ড দিন" required>
                            <label for="login-password">পাসওয়ার্ড</label>
                            <span class="material-symbols-outlined password-toggle" id="password-toggle">visibility_off</span>
                        </div>
                        <div class="login-links">
                            <a href="#" id="forgot-password-link">পাসওয়ার্ড ভুলে গেছেন?</a>
                        </div>
                        <button type="submit" class="btn btn-gradient">সাবমিট করুন →</button>
                    </form>
                    <div class="signup-link">
                        আপনার পূর্বে একাউন্ট নেই? <a href="#" id="show-signup-modal-btn">সাইন আপ করুন</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="login-modal hidden" id="signup-modal">
            <div class="login-card">
                 <div class="modal-info-panel">
                     <a href="#" class="logo">
                         <img id="header-logo-img-modal2" src="https://i.ibb.co/JqgWkCg/placeholder.png" alt="Dream's Academy" style="filter: brightness(0) invert(1); max-height: 45px;">
                     </a>
                    <h2>আমাদের সাথে যোগ দিন</h2>
                    <p>একটি নতুন অ্যাকাউন্ট তৈরি করে আপনার দক্ষতা বিকাশের পথে প্রথম পদক্ষেপ নিন।</p>
                </div>
                <div class="modal-form-panel">
                    <button class="close-modal-btn" aria-label="Close">&times;</button>
                    <h2>নতুন একাউন্ট তৈরি করুন</h2>
                    <form id="signup-form">
                        <div class="input-group">
                            <span class="material-symbols-outlined">person</span>
                            <input type="text" id="signup-name" placeholder="আপনার পুরো নাম দিন" required>
                            <label for="signup-name">পুরো নাম</label>
                        </div>
                        <div class="input-group">
                            <span class="material-symbols-outlined">mail</span>
                            <input type="email" id="signup-email" placeholder="আপনার ইমেইল দিন" required>
                            <label for="signup-email">ইমেইল</label>
                        </div>
                        <!-- === START: WHATSAPP FIELD ADDED === -->
                        <div class="input-group">
                            <span class="material-symbols-outlined">call</span>
                            <input type="tel" id="signup-whatsapp" placeholder="আপনার হোয়াটসঅ্যাপ নাম্বার দিন" required>
                            <label for="signup-whatsapp">হোয়াটসঅ্যাপ নাম্বার</label>
                        </div>
                        <!-- === END: WHATSAPP FIELD ADDED === -->
                        <div class="input-group">
                            <span class="material-symbols-outlined">lock</span>
                            <input type="password" id="signup-password" placeholder="পাসওয়ার্ড দিন (কমপক্ষে ৬ অক্ষর)" required>
                            <label for="signup-password">পাসওয়ার্ড</label>
                        </div>
                         <div class="input-group">
                            <span class="material-symbols-outlined">lock</span>
                            <input type="password" id="signup-confirm-password" placeholder="পাসওয়ার্ডটি পুনরায় দিন" required>
                            <label for="signup-confirm-password">পাসওয়ার্ডটি পুনরায় দিন</label>
                        </div>
                        <button type="submit" class="btn btn-gradient">সাইন আপ করুন →</button>
                    </form>
                    <div class="signup-link">
                        আপনার একাউন্ট আছে? <a href="#" id="show-login-modal-btn">লগ ইন করুন</a>
                    </div>
                </div>
            </div>
        </div>
        <!-- END: UPDATED LOGIN/SIGNUP MODALS -->


        <div class="login-modal hidden" id="forgot-password-modal">
            <div class="login-card" style="max-width: 500px; display: block; text-align: center;">
                <div class="modal-form-panel" style="width: 100%;">
                    <button class="close-modal-btn" aria-label="Close">&times;</button>
                    <h2 style="font-size: 1.8em; color: var(--text-dark);">Forgot password</h2>
                    <p style="margin-top: -15px; margin-bottom: 30px; color: #6c757d;">আপনার ইমেইল আইডি দিন</p>
                    <form id="forgot-password-form">
                        <div class="input-group">
                            <span class="material-symbols-outlined">mail</span>
                            <input type="email" id="reset-email" placeholder="আপনার ইমেইল আইডি দিন" required>
                             <label for="reset-email">আপনার ইমেইল</label>
                        </div>
                        <button type="submit" class="btn btn-gradient" style="width:100%; border-radius: 8px; padding: 14px;">সাবমিট করুন →</button>
                    </form>
                    <div class="signup-link">
                        লগইন করতে ফিরে যেতে চান? <a href="#" id="back-to-login-link">ক্লিক করুন</a>
                    </div>
                </div>
            </div>
        </div>


        <!-- ======================= Main Content (Logged Out View) ======================= -->
        <div id="main-content">

            <section class="hero-section page-section" id="home">
                <div class="container hero-grid">
                    <div class="hero-content">
                        <h1>অনলাইন সার্ভে করে ইনকাম করতে যোগ দিন  <br> <span>আমাদের ড্রিমস একাডেমির সাথে!</span></h1>
                        <p>বেকার বসে না থেকে আপনার হাতে থাকা ডিভাইসটি কাজে লাগিয়ে ইনকাম শুরু করুন প্রথম ক্লাস থেকেই  আমাদের গাইড লাইন ফলো করে।</p>
                        <div class="hero-buttons">
                            <a href="#courses" class="btn btn-gradient internal-link-btn">আমার কোর্স →</a>
                        </div>
                    </div>
                    <div class="hero-image-wrapper">
                        <img id="hero-image" src="https://i.ibb.co/6y15g7p/learning-concept-illustration-114360-6186-removebg-preview.png" alt="Online Education Platform">
                    </div>
                </div>
            </section>

            <section class="section about-section page-section hidden" id="about">
                <div class="container">
                    <h2 class="section-title">আমাদের সম্পর্কে জানুন</h2>
                    <div class="about-grid">
                        <div class="about-image">
                            <img id="about-us-image" src="https://i.ibb.co/hK4k1g2/about-us-image.jpg" alt="আমাদের সম্পর্কে">
                        </div>
                        <div class="about-content">
                            <h3>আমাদের লক্ষ্য আপনার সফলতায় সাহায্য করা</h3>
                            <p>Dream's Academy একটি অনলাইন শিক্ষা প্ল্যাটফর্ম যার মূল লক্ষ্য হলো বাংলাদেশের তরুণদের মাঝে প্রয়োজনীয় দক্ষতা তৈরি করে বেকারত্ব দূর করা। আমরা বিশ্বাস করি, সঠিক প্রশিক্ষণের মাধ্যমে যে কেউ নিজের ক্যারিয়ার গড়তে পারে এবং আর্থিকভাবে স্বাবলম্বী হতে পারে।</p>
                            <p>আমাদের প্রতিটি কোর্স অভিজ্ঞ প্রশিক্ষকদের দ্বারা এমনভাবে ডিজাইন করা হয়েছে, যেন শিক্ষার্থীরা সহজভাবে কঠিন বিষয়গুলো আয়ত্ত করতে পারে এবং বাস্তব জীবনে প্রয়োগ করতে পারে এবং খুব সহজে দ্রুত ইনকাম করতে পারে।</p>
                            <div class="about-features">
                                <div class="feature-item">
                                    <span class="material-symbols-outlined icon">school</span>
                                    <div>
                                        <h4>অভিজ্ঞ প্রশিক্ষক</h4>
                                        <p>আমাদের সকল প্রশিক্ষক তাদের নিজ নিজ ক্ষেত্রে বহু বছরের অভিজ্ঞতাসম্পন্ন।</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <span class="material-symbols-outlined icon">support_agent</span>
                                    <div>
                                        <h4>লাইফটাইম সাপোর্ট</h4>
                                        <p>কোর্স শেষ হওয়ার পরেও যেকোনো সমস্যায় আমাদের সাপোর্ট টিম আপনাকে সাহায্য করবে।</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <span class="material-symbols-outlined icon">slideshow</span>
                                    <div>
                                        <h4>লাইভ ক্লাস</h4>
                                        <p>আমরা লাইভ ক্লাসের মাধ্যমে শিক্ষার্থীদের প্রশ্ন করার এবং সরাসরি শেখার সুযোগ দেই।</p>
                                    </div>
                                </div>
                                <div class="feature-item">
                                    <span class="material-symbols-outlined icon">workspace_premium</span>
                                    <div>
                                        <h4>ক্যারিয়ার গাইডলাইন</h4>
                                        <p>ফ্রিল্যান্সিং এবং চাকরি পাওয়ার জন্য আমরা বিশেষ গাইডলাইন প্রদান করে থাকি।</p>
                                    </div>
                                </div>
                            </div>
                             <a href="#courses" class="btn btn-gradient internal-link-btn">আমাদের কোর্স দেখুন →</a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- START: MODIFIED TRUST SCREENSHOT SECTION -->
            <section class="section trust-section page-section" id="trust">
                <div class="container">
                    <h2 class="section-title">আমাদের সার্ভিস যারা নিয়েছে</h2>
                    <div class="slider-wrapper">
                        <div class="screenshot-grid" id="screenshot-container">
                            <!-- Dynamic screenshot cards will be added here by JS -->
                        </div>
                        <button class="slider-btn prev-btn">
                            <span class="material-symbols-outlined">arrow_back_ios</span>
                        </button>
                        <button class="slider-btn next-btn">
                            <span class="material-symbols-outlined">arrow_forward_ios</span>
                        </button>
                    </div>
                </div>
            </section>
            <!-- END: MODIFIED TRUST SCREENSHOT SECTION -->

            <section class="section services-section page-section hidden" id="services">
                <div class="container">
                    <h2 class="section-title">আমাদের সার্ভিস সমূহ</h2>
                    <div class="service-grid" id="services-container">
                        <!-- Dynamic service cards will be added here -->
                    </div>
                </div>
            </section>

            <section class="courses-section page-section hidden" id="courses">
                <div class="container">
                    <h2 class="section-title">আমাদের কোর্সসমূহ</h2>
                    <div class="course-grid" id="courses-container">
                        <!-- Dynamic course cards will be added here -->
                    </div>
                </div>
            </section>

            <section class="courses-section page-section hidden" id="noticeboard">
                <div class="container">
                    <h2 class="section-title">সাম্প্রতিক নোটিশ</h2>
                    <div class="notice-list-public" id="notice-board">
                        <!-- Dynamic notices will be added here -->
                    </div>
                </div>
            </section>

        </div>

        <!-- ======================= Dashboard Content (Logged In View) ======================= -->
        <div id="dashboard-content" class="hidden">
            <section class="dashboard">
                <div class="container dashboard-container">
                    <aside class="dashboard-sidebar">
                        <div class="sidebar-welcome-card">
                            <div class="sidebar-user">
                                <img src="https://i.ibb.co/L1LQtBm/default-avatar.png" alt="avatar">
                                <h4>স্বাগতম, শফিকুল</h4>
                            </div>
                        </div>
                        <nav class="sidebar-nav">
                            <ul id="sidebar-menu">
                                <li data-page="my-courses-page" class="active"><a href="#"><span class="material-symbols-outlined">book</span> আমার কোর্স</a></li>
                                <li data-page="class-joining-page"><a href="#"><span class="material-symbols-outlined">slideshow</span> ক্লাস জয়েনিং</a></li>
                                <li data-page="my-profile-page"><a href="#"><span class="material-symbols-outlined">manage_accounts</span> আমার প্রোফাইল</a></li>
                            </ul>
                        </nav>
                        <div class="countdown-timer">
                            <h4>পরবর্তী লাইভ ক্লাস শুরু হবে</h4>
                            <div id="timer">
                                <div class="time-block" id="days">00<span>দিন</span></div>
                                <div class="time-block" id="hours">00<span>ঘণ্টা</span></div>
                                <div class="time-block" id="minutes">00<span>মিনিট</span></div>
                                <div class="time-block" id="seconds">00<span>সেকেন্ড</span></div>
                            </div>
                        </div>
                    </aside>

                    <main class="dashboard-content">
                        <div class="dashboard-page" id="my-courses-page">
                           <div class="content-header"><h2>আমার কোর্সগুলি</h2></div>
                           <div class="course-grid" id="my-courses-grid">
                               <!-- Admin-assigned courses will be added here by JS -->
                           </div>
                        </div>

                        <div class="dashboard-page hidden" id="class-joining-page">
                            <div class="content-card">
                                <div class="content-header"><h2>লাইভ ক্লাস শিডিউল</h2></div>
                                <div id="live-class-schedule-container">
                                    <p>আপনার ক্লাস শিডিউল লোড হচ্ছে...</p>
                                </div>
                            </div>
                        </div>

                        <div class="dashboard-page hidden" id="my-profile-page">
                             <div class="content-card">
                                <div class="content-header">
                                    <h2>আমার প্রোফাইল</h2>
                                    <a href="#" class="btn btn-gradient">ভেরিফাই করুন →</a>
                                </div>
                                <div class="profile-summary">
                                    <div class="profile-avatar-wrapper">
                                        <img class="profile-avatar" id="profile-page-avatar" src="https://i.ibb.co/L1LQtBm/default-avatar.png" alt="Avatar">
                                        <label for="profile-image-upload" class="avatar-upload-label">
                                            <span class="material-symbols-outlined">edit</span>
                                        </label>
                                        <input type="file" id="profile-image-upload" accept="image/*" style="display: none;">
                                    </div>
                                    <h3 id="profile-summary-name">Md Shafiqul Islam</h3>
                                </div>
                                <form class="profile-form" id="profile-update-form">
                                    <h4>পার্সোনাল ডিটেইলস</h4>
                                    <div class="form-grid">
                                        <div class="form-group">
                                            <label for="fullName">আপনার পুরো নাম</label>
                                            <input type="text" id="fullName" value="Md Shafiqul Islam">
                                        </div>
                                         <div class="form-group">
                                            <label for="email">আপনার ইমেইল (অপরিবর্তনযোগ্য)</label>
                                            <input type="email" id="email" value="arafatislamshofiqul@gmail.com" readonly style="background-color: #e9ecef; cursor: not-allowed;">
                                        </div>
                                        <div class="form-group">
                                            <label for="mobile">হোয়াটসঅ্যাপ নম্বর</label>
                                            <input type="text" id="mobile" value="01703743441">
                                        </div>
                                        <div class="form-group">
                                            <label for="dob">জন্ম তারিখ</label>
                                            <input type="date" id="dob">
                                        </div>
                                         <div class="form-group">
                                            <label for="title">টাইটেল</label>
                                            <input type="text" id="title" placeholder="e.g., Web Developer">
                                        </div>
                                    </div>
                                    <button type="submit" class="btn btn-gradient">আপডেট করুন →</button>
                                </form>
                             </div>
                        </div>
                        
                        <div class="dashboard-page hidden" id="course-curriculum-page">
                            <div class="content-header">
                                <h2 id="curriculum-course-title">কোর্সের নাম লোড হচ্ছে...</h2>
                                <a href="#" id="back-to-my-courses" class="back-to-courses-btn">
                                    <span class="material-symbols-outlined">arrow_back</span> সকল কোর্স
                                </a>
                            </div>
                            <div class="curriculum-layout">
                                <div>
                                    <div class="video-player-wrapper">
                                        <div id="video-placeholder">
                                            <span class="material-symbols-outlined">play_circle</span>
                                            <h3>ভিডিও প্লেয়ার</h3>
                                            <p>শুরু করার জন্য ডান পাশ থেকে একটি ক্লাস সিলেক্ট করুন।</p>
                                        </div>
                                        <iframe id="youtube-player" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                                    </div>
                                    <!-- === START: NEWLY ADDED CLASS NOTE CONTAINER === -->
                                    <div id="class-note-container" class="hidden">
                                        <!-- Note content will be dynamically injected here by JavaScript -->
                                    </div>
                                    <!-- === END: NEWLY ADDED CLASS NOTE CONTAINER === -->
                                </div>
                                <div class="curriculum-list-wrapper">
                                    <div id="curriculum-list-container">
                                        <p>কারিকুলাম লোড হচ্ছে...</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </main>
                </div>
            </section>
        </div>

    </main>

    <!-- Payment Modal -->
    <div class="login-modal hidden" id="payment-modal">
        <div class="login-card" style="max-width: 500px; display: block; text-align: left; padding: 0;">
            <div class="modal-form-panel" style="width: 100%; position: relative;">
                <button id="close-payment-modal" class="close-modal-btn">&times;</button>
                <h2>পেমেন্ট তথ্য জমা দিন</h2>
                <div style="background: var(--background-light); padding: 15px; border-radius: 8px; margin-bottom: 25px;">
                     <p style="margin-bottom: 5px;">কোর্স: <strong id="payment-course-name-display"></strong></p>
                     <p style="font-size: 1.5em; color: var(--primary-blue); margin-bottom: 0;">মূল্য: <strong id="payment-amount-display"></strong></p>
                </div>

                <div style="padding: 15px; border: 1px dashed var(--secondary-blue); border-radius: 8px; margin-bottom: 25px; text-align: center;">
                    <p style="margin-bottom: 10px; font-weight: 500;">নিচের নাম্বারটি কপি করে সেন্ডমানি করুন (বিকাশ/নগদ)</p>
                    <div style="display: flex; justify-content: center; align-items: center; gap: 10px; background: #eaf6f6; padding: 10px; border-radius: 8px;">
                        <strong id="payment-number" style="font-size: 1.4em; color: var(--primary-blue); letter-spacing: 1px;">01703743441</strong>
                        <button type="button" id="copy-payment-number-btn" title="নম্বরটি কপি করুন" style="background: var(--secondary-blue); color: white; border: none; border-radius: 5px; padding: 5px 10px; cursor: pointer; display: inline-flex; align-items: center; gap: 5px;">
                            <span class="material-symbols-outlined" style="font-size: 18px;">content_copy</span> কপি
                        </button>
                    </div>
                </div>

                <form id="payment-form">
                    <input type="hidden" id="payment-course-name">
                    <div class="input-group">
                        <span class="material-symbols-outlined">mail</span>
                        <input type="email" id="payment-email" placeholder="আপনার ইমেইল" readonly style="background-color: #e9ecef; cursor: not-allowed;">
                        <label for="payment-email">আপনার ইমেইল</label>
                    </div>

                    <div class="input-group">
                         <span class="material-symbols-outlined">payments</span>
                         <select id="payment-account-type" required style="padding: 15px 15px 15px 50px; -webkit-appearance: none; appearance: none; background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%236c757d%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'); background-repeat: no-repeat; background-position: right 15px center; background-size: 12px;">
                            <option value="Bkash">বিকাশ</option>
                            <option value="Nagad">নগদ</option>
                         </select>
                    </div>

                    <div class="input-group">
                        <span class="material-symbols-outlined">attach_money</span>
                        <input type="text" id="payment-amount" placeholder="টাকার পরিমাণ" readonly style="background-color: #e9ecef; cursor: not-allowed;">
                        <label for="payment-amount">টাকার পরিমাণ</label>
                    </div>

                    <div class="input-group">
                        <span class="material-symbols-outlined">pin</span>
                        <input type="text" id="payment-trx-id" placeholder="আপনার সেন্ডমানির ট্রান্সজেকশন আইডি দিন" required>
                        <label for="payment-trx-id">ট্রান্সজেকশন আইডি</label>
                    </div>

                    <button type="submit" class="btn btn-gradient" style="width: 100%; padding: 14px; border-radius: 8px;">ভেরিফাই করুন →</button>
                </form>
            </div>
        </div>
    </div>


    <!-- ======================= Footer ======================= -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <a href="#" class="logo">
                        <img id="footer-logo-img" src="https://i.ibb.co/JqgWkCg/placeholder.png" alt="Dream's Academy">
                    </a>
                    <p>ডাউনলোড করুন আমাদের মোবাইল অ্যাপ</p><br>
                    <a href="#" class="app-download-badge">Download for Android</a>
                </div>
                <div class="footer-col">
                    <h4>হেল্পফুল লিংকস</h4>
                    <ul>
                        <li><a href="#">সকল কোর্স</a></li>
                        <li><a href="#">আমাদের সম্পর্কে</a></li>
                        <li><a href="#">স্টুডেন্ট ফিডব্যাক</a></li>
                        <li><a href="#">হেল্পডেস্ক</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>নেভিগেশন</h4>
                    <ul>
                        <li><a href="#">আমাদের ব্লগ</a></li>
                        <li><a href="#">টার্মস এন্ড কন্ডিশন</a></li>
                        <li><a href="#">রিফান্ড পলিসি</a></li>
                        <li><a href="#">প্রাইভেসি পলিসি</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>আমাদের যোগাযোগ মাধ্যম</h4>
                    <p><strong>কল করুন:</strong> 01703743441</p>
                    <p><strong>ইমেইল:</strong> dreams.edus@gmail.com</p>
                    <br>
                    <div class="social-icons">
                        <a href="#" class="social-icon">F</a>
                        <a href="#" class="social-icon">W</a>
                    </div>
                </div>
            </div>
            <div class="copyright">
                <p>© 2024 - 2025 Dream's Academy</p>
            </div>
        </div>
        <button id="scrollTopBtn"><span class="material-symbols-outlined">arrow_upward</span></button>
    </footer>

    <!-- Floating WhatsApp Icon -->
    <a href="https://wa.me/8801701126965" target="_blank" id="floating-whatsapp-btn" aria-label="Chat on WhatsApp">
        <span class="material-symbols-outlined">message</span>
    </a>

    <div id="toast-container"></div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <!-- ======================= Mobile Bottom Navigation ======================= -->
    <nav class="mobile-bottom-nav">
        <a href="#noticeboard" class="mobile-nav-link">
            <span class="material-symbols-outlined">campaign</span>
            <span>নোটিশ</span>
        </a>
        <a href="#courses" class="mobile-nav-link">
            <span class="material-symbols-outlined">book</span>
            <span>কোর্স</span>
        </a>
        <a href="#services" class="mobile-nav-link">
            <span class="material-symbols-outlined">apps</span>
            <span>সার্ভিস</span>
        </a>
        <a href="#about" class="mobile-nav-link">
            <span class="material-symbols-outlined">menu</span>
            <span>আরও</span>
        </a>
    </nav>


    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAu6Lo33AH6GWFDHusaP14fmAHb0LEzWOQ",
            authDomain: "go-pixel-f1c13.firebaseapp.com",
            projectId: "go-pixel-f1c13",
            storageBucket: "go-pixel-f1c13.appspot.com",
            messagingSenderId: "390711689002",
            appId: "1:390711689002:web:0ce672f38aeca40d2f6853"
        };

        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        let notificationListener = null;


        document.addEventListener('DOMContentLoaded', function() {
            // --- Variable Declarations ---
            const loginSignupBtn = document.getElementById('login-signup-btn');
            const loginModal = document.getElementById('login-modal');
            const loginForm = document.getElementById('login-form');
            const passwordField = document.getElementById('login-password');
            const passwordToggle = document.getElementById('password-toggle');
            
            const signupModal = document.getElementById('signup-modal');
            const signupForm = document.getElementById('signup-form');
            const showSignupBtn = document.getElementById('show-signup-modal-btn');
            const showLoginBtn = document.getElementById('show-login-modal-btn');
            
            const forgotPasswordModal = document.getElementById('forgot-password-modal');
            const forgotPasswordLink = document.getElementById('forgot-password-link');
            const forgotPasswordForm = document.getElementById('forgot-password-form');
            const backToLoginLink = document.getElementById('back-to-login-link');

            const loggedOutView = document.getElementById('logged-out-view');
            const loggedInView = document.getElementById('logged-in-view');
            const mainContent = document.getElementById('main-content');
            const dashboardContent = document.getElementById('dashboard-content');

            const profileIcon = document.getElementById('profile-icon');
            const profileDropdown = document.getElementById('profile-dropdown');
            const dashboardLink = document.getElementById('dashboard-link');
            const myProfileLink = document.getElementById('my-profile-link');
            const logoutBtn = document.getElementById('logout-btn');
            
            const notificationIcon = document.getElementById('notification-icon');
            const notificationBadge = document.getElementById('notification-badge');
            const notificationDropdown = document.getElementById('notification-dropdown');
            const notificationListContainer = document.getElementById('notification-list-container');


            const sidebarMenuItems = document.querySelectorAll('#sidebar-menu li');
            const dashboardPages = document.querySelectorAll('.dashboard-page');

            const scrollTopBtn = document.getElementById('scrollTopBtn');

            const mainNavLinks = document.querySelectorAll('.main-nav a[href^="#"]');
            const navLiElements = document.querySelectorAll('.main-nav ul > li');
            const logoLink = document.querySelector('header .logo');

            const profileUpdateForm = document.getElementById('profile-update-form');

            const mainContentSections = document.querySelectorAll('#main-content .page-section');
            const internalLinkButtons = document.querySelectorAll('.internal-link-btn');

            const paymentModal = document.getElementById('payment-modal');
            const closePaymentModalBtn = document.getElementById('close-payment-modal');
            const paymentForm = document.getElementById('payment-form');
            const copyPaymentNumberBtn = document.getElementById('copy-payment-number-btn');
            const adminPanelLinkLi = document.getElementById('admin-panel-link-li');
            const ADMIN_EMAIL = "arafatislamshofiqul@gmail.com";

            const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');

            const profileImageUpload = document.getElementById('profile-image-upload');
            const profilePageAvatar = document.getElementById('profile-page-avatar');
            const headerAvatar = document.querySelector('.profile-dropdown-header img');
            const sidebarAvatar = document.querySelector('.sidebar-user img');

            const IMGBB_API_KEY = "41b94ddf4c1e99c53b0253d7daefadef";
            
            const backToMyCoursesBtn = document.getElementById('back-to-my-courses');


            // --- Functions ---
            
            async function loadHeaderLogo() {
                const logoElements = [
                    document.getElementById('header-logo-img'),
                    document.getElementById('header-logo-img-modal'),
                    document.getElementById('header-logo-img-modal2'),
                    document.getElementById('footer-logo-img')
                ].filter(el => el);

                if (logoElements.length === 0) return;
                
                const defaultLogo = 'https://i.ibb.co/JqgWkCg/placeholder.png';

                try {
                    const doc = await db.collection('site_settings').doc('header_settings').get();
                    let logoUrl = defaultLogo;
                    if (doc.exists && doc.data().logoImageUrl) {
                        logoUrl = doc.data().logoImageUrl;
                    }
                    logoElements.forEach(img => img.src = logoUrl);
                } catch (error) {
                    console.error("Error fetching header logo:", error);
                    logoElements.forEach(img => img.src = defaultLogo);
                }
            }

            async function loadHeroImage() {
                const heroImageElement = document.getElementById('hero-image');
                if (!heroImageElement) return;

                try {
                    const doc = await db.collection('site_settings').doc('hero_section').get();
                    if (doc.exists && doc.data().imageUrl) {
                        heroImageElement.src = doc.data().imageUrl;
                    } else {
                        heroImageElement.src = 'https://i.ibb.co/6y15g7p/learning-concept-illustration-114360-6186-removebg-preview.png';
                    }
                } catch (error) {
                    console.error("Error fetching hero image:", error);
                    heroImageElement.src = 'https://i.ibb.co/6y15g7p/learning-concept-illustration-114360-6186-removebg-preview.png';
                }
            }
            
            async function loadAboutUsImage() {
                const aboutImageElement = document.getElementById('about-us-image');
                if (!aboutImageElement) return;

                try {
                    const doc = await db.collection('site_settings').doc('about_us_section').get();
                    if (doc.exists && doc.data().imageUrl) {
                        aboutImageElement.src = doc.data().imageUrl;
                    }
                } catch (error) {
                    console.error("Error fetching 'About Us' image:", error);
                }
            }

            function showToast(message, type = 'info') {
                const toastContainer = document.getElementById('toast-container');
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                let icon = 'info';
                if (type === 'success') icon = 'check_circle';
                if (type === 'error') icon = 'error';
                toast.innerHTML = `<span class="material-symbols-outlined">${icon}</span> ${message}`;
                toastContainer.appendChild(toast);
                setTimeout(() => {
                    toast.remove();
                }, 4000);
            }

            function showPageSection(targetId) {
                if (!dashboardContent.classList.contains('hidden')) {
                    dashboardContent.classList.add('hidden');
                    mainContent.classList.remove('hidden');
                }
                mainContentSections.forEach(section => {
                    section.classList.add('hidden');
                });

                const targetSection = document.getElementById(targetId);
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                }
                window.scrollTo({ top: 0, behavior: 'smooth' });

                navLiElements.forEach(li => li.classList.remove('active'));
                const activeNavLink = document.querySelector(`.main-nav a[href="#${targetId}"]`);
                if (activeNavLink) {
                    const parentLi = activeNavLink.closest('li');
                    if(parentLi) parentLi.classList.add('active');
                }

                mobileNavLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === `#${targetId}`) {
                        link.classList.add('active');
                    }
                });
            }

            function showLoginModal() {
                signupModal.classList.add('hidden');
                forgotPasswordModal.classList.add('hidden');
                loginModal.classList.remove('hidden');
            }

            function hideLoginModal() {
                loginModal.classList.add('hidden');
            }

            function showSignupModal() {
                loginModal.classList.add('hidden');
                forgotPasswordModal.classList.add('hidden');
                signupModal.classList.remove('hidden');
            }

            function hideSignupModal() {
                signupModal.classList.add('hidden');
            }
            
            function showForgotPasswordModal() {
                loginModal.classList.add('hidden');
                signupModal.classList.add('hidden');
                forgotPasswordModal.classList.remove('hidden');
            }

            function hideForgotPasswordModal() {
                forgotPasswordModal.classList.add('hidden');
            }

            function togglePassword() {
                const allPasswordFields = document.querySelectorAll('input[type="password"], input[type="text"]');
                const targetField = document.getElementById(passwordToggle.previousElementSibling.id);
                const isPassword = targetField.type === 'password';

                targetField.type = isPassword ? 'text' : 'password';
                passwordToggle.textContent = isPassword ? 'visibility' : 'visibility_off';
            }

            function populateUI(userData) {
                if (!userData) return;

                const displayName = userData.name || userData.email;
                const userEmail = userData.email;
                const photoUrl = userData.photoURL || 'https://i.ibb.co/L1LQtBm/default-avatar.png';

                if (sidebarAvatar) sidebarAvatar.src = photoUrl;
                document.querySelector('.sidebar-user h4').textContent = `স্বাগতম, ${displayName.split(' ')[0]}`;

                if (headerAvatar) headerAvatar.src = photoUrl;
                document.querySelector('.profile-dropdown-header h4').textContent = displayName;
                document.querySelector('.profile-dropdown-header p').textContent = userEmail;

                document.getElementById('profile-summary-name').textContent = displayName;
                if (profilePageAvatar) profilePageAvatar.src = photoUrl;
            }

            function handleLogin(event) {
                event.preventDefault();
                const email = document.getElementById('login-email').value;
                const password = document.getElementById('login-password').value;

                auth.signInWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        hideLoginModal();
                        showToast(`স্বাগতম! আপনি সফলভাবে লগইন করেছেন।`, 'success');
                    })
                    .catch((error) => {
                        let message = "একটি ত্রুটি ঘটেছে।";
                        if (error.code === 'auth/user-not-found') {
                            message = "এই ইমেইলের কোনো একাউন্ট পাওয়া যায়নি।";
                        } else if (error.code === 'auth/wrong-password') {
                            message = "ভুল পাসওয়ার্ড। আবার চেষ্টা করুন।";
                        }
                        showToast(message, 'error');
                    });
            }
            
            // === START: JAVASCRIPT MODIFIED FOR WHATSAPP FIELD ===
            function handleSignup(event) {
                event.preventDefault();
                const name = document.getElementById('signup-name').value;
                const email = document.getElementById('signup-email').value;
                const whatsapp = document.getElementById('signup-whatsapp').value;
                const password = document.getElementById('signup-password').value;
                const confirmPassword = document.getElementById('signup-confirm-password').value;

                if (password !== confirmPassword) {
                    showToast("পাসওয়ার্ড দুটি মেলেনি।", 'error');
                    return;
                }

                auth.createUserWithEmailAndPassword(email, password)
                    .then((userCredential) => {
                        const user = userCredential.user;
                        return db.collection('users').doc(user.uid).set({
                            name: name,
                            email: email,
                            mobile: whatsapp, // Saving whatsapp number to 'mobile' field
                            dob: '',
                            title: '',
                            photoURL: ''
                        });
                    })
                    .then(() => {
                        db.collection('notifications').add({
                            title: 'নতুন শিক্ষার্থী রেজিস্ট্রেশন',
                            message: `একজন নতুন শিক্ষার্থী (${email}) সাইন আপ করেছেন।`,
                            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                            type: 'new_user',
                            read: false
                        });

                        showToast("সাইন আপ সফল হয়েছে! এখন লগ ইন করুন।", 'success');
                        signupForm.reset();
                        showLoginModal();
                    })
                    .catch((error) => {
                        let message = "একটি ত্রুটি ঘটেছে।";
                        if (error.code === 'auth/email-already-in-use') {
                            message = "এই ইমেইল দিয়ে ইতিমধ্যে একটি একাউন্ট আছে।";
                        } else if (error.code === 'auth/weak-password') {
                            message = "পাসওয়ার্ডটি অন্তত ৬ অক্ষরের হতে হবে।";
                        }
                        showToast(message, 'error');
                    });
            }
            // === END: JAVASCRIPT MODIFIED FOR WHATSAPP FIELD ===
            
            function handlePasswordResetRequest(event) {
                event.preventDefault();
                const emailInput = document.getElementById('reset-email');
                const email = emailInput.value.trim();

                if (!email) {
                    showToast("অনুগ্রহ করে আপনার ইমেইল আইডি দিন।", "error");
                    return;
                }

                const submitBtn = forgotPasswordForm.querySelector('button[type="submit"]');
                submitBtn.disabled = true;
                submitBtn.textContent = 'প্রসেসিং...';

                auth.sendPasswordResetEmail(email)
                    .then(() => {
                        showToast(`পাসওয়ার্ড রিসেট লিঙ্কটি ${email} এই ইমেইলে পাঠানো হয়েছে।`, 'success');
                        hideForgotPasswordModal();
                        emailInput.value = ''; 
                    })
                    .catch((error) => {
                        let message = "একটি ত্রুটি ঘটেছে।";
                        if (error.code === 'auth/user-not-found') {
                            message = "এই ইমেইলের কোনো একাউন্ট পাওয়া যায়নি।";
                        } else if (error.code === 'auth/invalid-email') {
                            message = "দয়া করে একটি সঠিক ইমেইল দিন।";
                        }
                        console.error("Password Reset Error:", error);
                        showToast(message, 'error');
                    })
                    .finally(() => {
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = 'সাবমিট করুন →';
                    });
            }

            function handleLogout() {
                auth.signOut().then(() => {
                    showToast("আপনি সফলভাবে লগ আউট হয়েছেন।", "info");
                }).catch((error) => {
                    showToast("লগ আউট করার সময় একটি সমস্যা হয়েছে।", "error");
                });
            }
            
            function formatNotificationTime(timestamp) {
                if (!timestamp) return '';
                const date = timestamp.toDate();
                const now = new Date();
                const diffSeconds = Math.floor((now - date) / 1000);
                const diffMinutes = Math.floor(diffSeconds / 60);
                const diffHours = Math.floor(diffMinutes / 60);
                const diffDays = Math.floor(diffHours / 24);

                if (diffSeconds < 60) return 'এখনই';
                if (diffMinutes < 60) return `${diffMinutes} মিনিট আগে`;
                if (diffHours < 24) return `${diffHours} ঘণ্টা আগে`;
                if (diffDays === 1) return 'গতকাল';
                
                return new Intl.DateTimeFormat('bn-BD', {
                    month: 'long', day: 'numeric', year: 'numeric'
                }).format(date);
            }

            function updateNotificationUI(notifications) {
                notificationListContainer.innerHTML = ''; 
                if (notifications.length === 0) {
                    notificationListContainer.innerHTML = '<li class="no-notification-message">কোনো নতুন নোটিফিকেশন নেই।</li>';
                    notificationBadge.classList.add('hidden');
                    return;
                }
                
                notificationBadge.classList.remove('hidden');

                notifications.forEach(notification => {
                    const data = notification.data();
                    let icon = 'notifications_active';
                    let iconClass = '';
                    if (data.type === 'class_notice') {
                        icon = 'campaign';
                        iconClass = 'notice-icon';
                    } else if (data.type === 'new_course' || data.type === 'content_update') {
                        icon = 'school';
                    }
                    
                    const listItem = document.createElement('li');
                    listItem.className = 'notification-list-item';
                    listItem.innerHTML = `
                        <div class="notification-icon ${iconClass}">
                            <span class="material-symbols-outlined">${icon}</span>
                        </div>
                        <div class="notification-content">
                            <p>${data.message || data.title}</p>
                            <span class="time">${formatNotificationTime(data.timestamp)}</span>
                        </div>
                    `;
                    notificationListContainer.appendChild(listItem);
                });
            }
            
            function showBrowserNotification(notification) {
                if (Notification.permission === 'granted') {
                    const notif = new Notification(notification.title, {
                        body: notification.message,
                        icon: 'https://i.ibb.co/L1LQtBm/default-avatar.png'
                    });
                }
            }

            function initializeNotifications() {
                if (Notification.permission === 'default') {
                    Notification.requestPermission();
                }
                if (notificationListener) {
                    notificationListener();
                }
                notificationListener = db.collection('notifications')
                    .orderBy('timestamp', 'desc')
                    .limit(20)
                    .onSnapshot(snapshot => {
                        updateNotificationUI(snapshot.docs);
                        
                        snapshot.docChanges().forEach(change => {
                            if (change.type === 'added') {
                                showBrowserNotification(change.doc.data());
                            }
                        });

                    }, error => {
                        console.error("Error fetching notifications: ", error);
                        notificationListContainer.innerHTML = '<li class="no-notification-message">নোটিফিকেশন লোড করা যায়নি।</li>';
                    });
            }

            function cleanupNotifications() {
                if (notificationListener) {
                    notificationListener(); 
                    notificationListener = null;
                }
                notificationListContainer.innerHTML = '<li class="no-notification-message">কোনো নতুন নোটিফিকেশন নেই।</li>';
                notificationBadge.classList.add('hidden');
            }

            function populateProfileForm() {
                const user = auth.currentUser;
                if (!user) return;

                db.collection('users').doc(user.uid).get().then(doc => {
                    if (doc.exists) {
                        const userData = doc.data();
                        document.getElementById('fullName').value = userData.name || '';
                        document.getElementById('email').value = userData.email || '';
                        document.getElementById('mobile').value = userData.mobile || '';
                        document.getElementById('dob').value = userData.dob || '';
                        document.getElementById('title').value = userData.title || '';

                        if(profilePageAvatar) {
                           profilePageAvatar.src = userData.photoURL || 'https://i.ibb.co/L1LQtBm/default-avatar.png';
                        }
                    }
                });
            }

            function handleProfileUpdate(event) {
                event.preventDefault();
                const user = auth.currentUser;
                if (!user) {
                    showToast("আপডেট করার জন্য আপনাকে লগইন করতে হবে।", "error");
                    return;
                }

                const updatedData = {
                    name: document.getElementById('fullName').value,
                    mobile: document.getElementById('mobile').value,
                    dob: document.getElementById('dob').value,
                    title: document.getElementById('title').value,
                };

                const userRef = db.collection('users').doc(user.uid);

                userRef.update(updatedData)
                    .then(() => {
                        return userRef.get();
                    })
                    .then(doc => {
                        if (doc.exists) {
                            populateUI(doc.data());
                            showToast("প্রোফাইল সফলভাবে আপডেট করা হয়েছে!", "success");
                        }
                    })
                    .catch(error => {
                        console.error("Firestore Profile Update Error:", error);
                        showToast("প্রোফাইল আপডেট করার সময় একটি অপ্রত্যাশিত সমস্যা হয়েছে।", "error");
                    });
            }

            auth.onAuthStateChanged(user => {
                if (user && user.email === ADMIN_EMAIL) {
                    loggedInView.classList.add('hidden');
                    loggedOutView.classList.remove('hidden');
                    adminPanelLinkLi.classList.add('hidden');
                    if (!dashboardContent.classList.contains('hidden')) {
                        mainContent.classList.remove('hidden');
                        dashboardContent.classList.add('hidden');
                        showPageSection('home');
                    }
                     cleanupNotifications();
                }
                else if (user) {
                    loggedOutView.classList.add('hidden');
                    loggedInView.classList.remove('hidden');
                    profileDropdown.style.display = 'none';
                    notificationDropdown.classList.add('hidden');

                    adminPanelLinkLi.classList.add('hidden');

                    db.collection('users').doc(user.uid).get().then(doc => {
                        if (doc.exists) {
                            populateUI(doc.data());
                        } else {
                            populateUI({ name: user.email, email: user.email });
                        }
                    });
                    displayMyCourses();
                    initializeNotifications();
                } else {
                    loggedInView.classList.add('hidden');
                    loggedOutView.classList.remove('hidden');
                    adminPanelLinkLi.classList.add('hidden');
                    showPageSection('home');
                    cleanupNotifications();
                }
            });

            // START: NEW FUNCTION TO INITIALIZE THE SLIDER
            function initTrustSlider() {
                const sliderContainer = document.querySelector('#screenshot-container');
                const slides = document.querySelectorAll('.screenshot-item');
                const prevBtn = document.querySelector('.prev-btn');
                const nextBtn = document.querySelector('.next-btn');

                if (!sliderContainer || !prevBtn || !nextBtn || slides.length <= 1) {
                    if(prevBtn) prevBtn.style.display = 'none';
                    if(nextBtn) nextBtn.style.display = 'none';
                    return;
                }
                
                prevBtn.style.display = 'flex';
                nextBtn.style.display = 'flex';

                let currentIndex = 0;
                let slideInterval;

                function goToSlide(index) {
                    if (index < 0) {
                        index = slides.length - 1;
                    } else if (index >= slides.length) {
                        index = 0;
                    }
                    sliderContainer.style.transform = `translateX(-${index * 100}%)`;
                    currentIndex = index;
                }

                function nextSlide() {
                    goToSlide(currentIndex + 1);
                }

                function prevSlide() {
                    goToSlide(currentIndex - 1);
                }

                function startSlider() {
                    stopSlider(); // Ensure no multiple intervals are running
                    slideInterval = setInterval(nextSlide, 3000); // Change slide every 3 seconds
                }

                function stopSlider() {
                    clearInterval(slideInterval);
                }

                nextBtn.addEventListener('click', () => {
                    nextSlide();
                    stopSlider();
                    startSlider();
                });
                
                prevBtn.addEventListener('click', () => {
                    prevSlide();
                    stopSlider();
                    startSlider();
                });

                const sliderWrapper = document.querySelector('.slider-wrapper');
                if(sliderWrapper) {
                    sliderWrapper.addEventListener('mouseenter', stopSlider);
                    sliderWrapper.addEventListener('mouseleave', startSlider);
                }

                startSlider();
            }

            // MODIFIED FUNCTION TO DISPLAY TRUST SCREENSHOTS
            async function displayTrustScreenshots() {
                const container = document.getElementById('screenshot-container');
                if (!container) return;

                try {
                    container.innerHTML = '<em>সফলতার চিত্র লোড হচ্ছে...</em>';
                    const snapshot = await db.collection('trust_screenshots').orderBy('timestamp', 'desc').get();
                    let allScreenshotsHTML = '';

                    snapshot.forEach(doc => {
                        const screenshot = doc.data();
                        const screenshotHTML = `
                            <div class="screenshot-item">
                                <img src="${screenshot.imageUrl}" alt="${screenshot.title || 'Trust Screenshot'}">
                            </div>
                        `;
                        allScreenshotsHTML += screenshotHTML;
                    });

                    if (allScreenshotsHTML === '') {
                        container.innerHTML = '<p>এই মুহূর্তে কোনো স্ক্রিনশট পাওয়া যায়নি।</p>';
                        const sliderWrapper = container.closest('.slider-wrapper');
                        if (sliderWrapper) {
                            sliderWrapper.querySelector('.prev-btn').style.display = 'none';
                            sliderWrapper.querySelector('.next-btn').style.display = 'none';
                        }
                    } else {
                        container.innerHTML = allScreenshotsHTML;
                        initTrustSlider(); // Initialize the slider after images are loaded
                    }
                } catch (error) {
                    console.error("Error fetching trust screenshots:", error);
                    container.innerHTML = '<p>স্ক্রিনশট লোড করার সময় একটি সমস্যা হয়েছে।</p>';
                }
            }


            async function displayServices() {
                const container = document.getElementById('services-container');
                if (!container) return;

                try {
                    container.innerHTML = '<em>সার্ভিস লোড হচ্ছে...</em>';
                    const snapshot = await db.collection('services').get();
                    let allServicesHTML = '';

                    snapshot.forEach(doc => {
                        const service = doc.data();
                        const savedPercentage = Math.round(((service.oldPrice - service.currentPrice) / service.oldPrice) * 100);

                        const serviceHTML = `
                            <div class="service-card">
                                <h3>${service.name}</h3>
                                <p class="plan-description">${service.description}</p>
                                <div class="pricing-info">
                                    <span class="old-price">৳ ${service.oldPrice}</span>
                                    ${savedPercentage > 0 ? `<span class="save-badge"><span class="material-symbols-outlined">sell</span> Save ${savedPercentage}%</span>` : ''}
                                </div>
                                <div class="current-price">
                                    <span class="price-amount">৳ ${service.currentPrice}</span>
                                    <span class="price-duration">/mo</span>
                                </div>
                                <a href="#" class="btn btn-solid-blue buy-now-btn" data-name="${service.name}" data-price="${service.currentPrice}">Buy Now</a>
                                <ul class="service-features">
                                    ${(service.features || []).map(feature => `<li><span class="material-symbols-outlined">check_circle</span>${feature}</li>`).join('')}
                                </ul>
                            </div>
                        `;
                        allServicesHTML += serviceHTML;
                    });

                    if (allServicesHTML === '') {
                        container.innerHTML = '<p>এই মুহূর্তে কোনো সার্ভিস পাওয়া যায়নি।</p>';
                    } else {
                        container.innerHTML = allServicesHTML;
                         document.querySelectorAll('#services-container .buy-now-btn').forEach(button => {
                            button.addEventListener('click', handleBuyNowClick);
                        });
                    }
                } catch (error) {
                    console.error("Error fetching services:", error);
                    container.innerHTML = '<p>সার্ভিস লোড করার সময় একটি সমস্যা হয়েছে।</p>';
                }
            }

            async function displayCourses() {
                const container = document.getElementById('courses-container');
                if (!container) return;

                try {
                    container.innerHTML = '<em>কোর্স লোড হচ্ছে...</em>';
                    const snapshot = await db.collection('courses').get();
                    let allCoursesHTML = '';

                    snapshot.forEach(doc => {
                        const course = doc.data();
                        const courseHTML = `
                            <div class="course-card">
                                <div class="card-thumbnail">
                                    <img src="${course.image || 'https://i.ibb.co/JqgWkCg/placeholder.png'}" alt="${course.name}">
                                </div>
                                <div class="card-content">
                                    <div class="card-meta">
                                        <span class="category-tag">${course.category}</span>
                                        <div class="rating">★★★★★</div>
                                    </div>
                                    <h3>${course.name}</h3>
                                    <div class="instructor">
                                        <span class="material-symbols-outlined">person</span>
                                        <span>${course.instructor}</span>
                                    </div>
                                    <div class="course-info">
                                        <div class="course-info-item"><span class="material-symbols-outlined">schedule</span><span>${course.duration}</span></div>
                                        <div class="course-info-item"><span class="material-symbols-outlined">receipt_long</span><span>${course.lectures} টি লেকচার</span></div>
                                    </div>
                                    <div class="card-footer">
                                        <span class="price">৳ ${course.price}</span>
                                        <a href="#" class="btn btn-outline buy-now-btn" data-name="${course.name}" data-price="${course.price}">কোর্সটি কিনুন</a>
                                    </div>
                                </div>
                            </div>
                        `;
                        allCoursesHTML += courseHTML;
                    });

                    if (allCoursesHTML === '') {
                        container.innerHTML = '<p>এই মুহূর্তে কোনো কোর্স পাওয়া যায়নি।</p>';
                    } else {
                        container.innerHTML = allCoursesHTML;
                         document.querySelectorAll('#courses-container .buy-now-btn').forEach(button => {
                            button.addEventListener('click', handleBuyNowClick);
                        });
                    }
                } catch (error) {
                    console.error("Error fetching courses:", error);
                    container.innerHTML = '<p>কোর্স লোড করার সময় একটি সমস্যা হয়েছে।</p>';
                }
            }

            async function displayNotices() {
                const container = document.getElementById('notice-board');
                if (!container) return;

                try {
                    container.innerHTML = '<em>নোটিশ লোড হচ্ছে...</em>';
                    const snapshot = await db.collection('notices').orderBy('timestamp', 'desc').get();
                    let allNoticesHTML = '';

                    snapshot.forEach(doc => {
                        const notice = doc.data();
                        const noticeHTML = `
                            <div class="notice-item">
                                <span class="material-symbols-outlined">campaign</span>
                                <div class="notice-details">
                                    <h4>${notice.title}</h4>
                                    <p>${notice.description}</p>
                                </div>
                            </div>
                        `;
                        allNoticesHTML += noticeHTML;
                    });

                     if (allNoticesHTML === '') {
                        container.innerHTML = '<p>এই মুহূর্তে কোনো নতুন নোটিশ নেই।</p>';
                    } else {
                        container.innerHTML = allNoticesHTML;
                    }
                } catch (error) {
                    console.error("Error fetching notices:", error);
                    container.innerHTML = '<p>নোটিশ লোড করার সময় একটি সমস্যা হয়েছে।</p>';
                }
            }

            async function displayMyCourses() {
                const grid = document.getElementById('my-courses-grid');
                const user = auth.currentUser;
                if (!user || !grid) return;

                grid.innerHTML = '<p style="text-align: center;">আপনার কোর্স লোড হচ্ছে...</p>';

                try {
                    const enrollmentsQuery = db.collection('enrollments').where('studentUid', '==', user.uid);
                    const snapshot = await enrollmentsQuery.get();

                    if (snapshot.empty) {
                        grid.innerHTML = '<p style="text-align: center;">আপনি এখনও কোনো কোর্সে এনরোল করেননি।</p>';
                        return;
                    }

                    let allCoursesHTML = '';
                    snapshot.forEach(doc => {
                        const enrollment = doc.data();
                        const courseHTML = `
                            <div class="course-card">
                               <div class="card-thumbnail"><img src="${enrollment.courseImage}" alt="Course Thumbnail"></div>
                               <div class="card-content">
                                   <span class="category-tag">${enrollment.courseCategory} - ব্যাচ ${enrollment.batch}</span>
                                   <h3>${enrollment.courseName}</h3>
                                   <button class="btn btn-outline start-course-btn"
                                           data-course-name="${enrollment.courseName}"
                                           data-batch="${enrollment.batch}"
                                           style="width:100%; margin-top: 15px;">
                                       কোর্সটি শুরু করুন
                                   </button>
                               </div>
                           </div>
                        `;
                        allCoursesHTML += courseHTML;
                    });
                    grid.innerHTML = allCoursesHTML;
                    
                    document.querySelectorAll('.start-course-btn').forEach(button => {
                        button.addEventListener('click', (event) => {
                            const courseName = event.currentTarget.dataset.courseName;
                            const batch = event.currentTarget.dataset.batch;
                            showCurriculumPage(courseName, batch);
                        });
                    });


                } catch (error) {
                    console.error("Error fetching enrolled courses: ", error);
                    grid.innerHTML = '<p style="text-align: center; color: red;">আপনার কোর্সগুলো লোড করার সময় একটি সমস্যা হয়েছে।</p>';
                }
            }
            
            function getYouTubeEmbedUrl(url) {
                if (!url) return '';
                let videoId = '';
                try {
                    const urlObj = new URL(url);
                    if (urlObj.hostname === 'youtu.be') {
                        videoId = urlObj.pathname.slice(1);
                    } else if (urlObj.hostname.includes('youtube.com')) {
                        videoId = urlObj.searchParams.get('v');
                    }
                } catch(e) {
                    console.error("Invalid URL for YouTube", e);
                    return '';
                }
                return videoId ? `https://www.youtube.com/embed/${videoId}` : '';
            }
            
            async function fetchAndDisplayCurriculum(courseName, batch) {
                const container = document.getElementById('curriculum-list-container');
                const player = document.getElementById('youtube-player');
                const placeholder = document.getElementById('video-placeholder');
                const noteContainer = document.getElementById('class-note-container');


                container.innerHTML = '<p>কারিকুলাম লোড হচ্ছে...</p>';
                player.src = ''; 
                placeholder.classList.remove('hidden');
                noteContainer.classList.add('hidden'); // Hide note container initially
                noteContainer.innerHTML = '';


                try {
                    const query = await db.collection('curriculum')
                                        .where('courseName', '==', courseName)
                                        .where('batch', '==', batch)
                                        .limit(1)
                                        .get();

                    if (query.empty) {
                        container.innerHTML = '<p>এই কোর্সের জন্য কোনো কারিকুলাম এখনো যোগ করা হয়নি।</p>';
                        return;
                    }

                    const curriculumData = query.docs[0].data();
                    let curriculumHTML = '';

                    (curriculumData.modules || []).forEach((module, index) => {
                         const lectureCount = module.videos ? module.videos.length : 0;
                         curriculumHTML += `
                            <div class="curriculum-module">
                                <div class="module-header" data-target="module-videos-${index}">
                                    <span>${module.title} • ${lectureCount} লেকচার</span>
                                    <span class="material-symbols-outlined">expand_more</span>
                                </div>
                                <ul class="module-videos" id="module-videos-${index}">
                                    ${(module.videos || []).map(video => {
                                        const noteData = video.classNote || '';
                                        return `
                                            <li>
                                                <a href="#" class="video-item-link" data-video-url="${video.youtubeLink}" data-note="${encodeURIComponent(noteData)}">
                                                    <div class="video-title-wrapper">
                                                        <span class="material-symbols-outlined">play_circle</span>
                                                        <span>${video.title}</span>
                                                    </div>
                                                    <span class="video-duration">${video.duration || ''}</span>
                                                </a>
                                            </li>
                                        `;
                                    }).join('')}
                                </ul>
                            </div>
                         `;
                    });

                    container.innerHTML = curriculumHTML || '<p>এই মডিউলে কোনো ভিডিও যোগ করা হয়নি।</p>';

                    container.querySelectorAll('.module-header').forEach(header => {
                        header.addEventListener('click', () => {
                            header.classList.toggle('active');
                            const content = document.getElementById(header.dataset.target);
                            content.classList.toggle('show');
                        });
                    });

                    container.querySelectorAll('.video-item-link').forEach(link => {
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            
                            container.querySelectorAll('.video-item-link').forEach(l => l.classList.remove('playing'));
                            
                            link.classList.add('playing');
                            
                            // Handle Video
                            const videoUrl = link.dataset.videoUrl;
                            const embedUrl = getYouTubeEmbedUrl(videoUrl);
                            if (embedUrl) {
                                placeholder.classList.add('hidden');
                                player.src = embedUrl;
                            } else {
                                showToast("দুঃখিত, ভিডিও লিঙ্কটি সঠিক নয়।", "error");
                                placeholder.classList.remove('hidden');
                                player.src = '';
                            }

                            // === START: NEW LOGIC FOR DISPLAYING NOTE ===
                            const encodedNote = link.dataset.note;
                            const noteContent = decodeURIComponent(encodedNote);

                            if (noteContent && noteContent.trim() !== '') {
                                noteContainer.innerHTML = `
                                    <h4>নোট</h4>
                                    <div class="note-content">${noteContent}</div>
                                `;
                                noteContainer.classList.remove('hidden');
                            } else {
                                noteContainer.innerHTML = '';
                                noteContainer.classList.add('hidden');
                            }
                            // === END: NEW LOGIC FOR DISPLAYING NOTE ===
                        });
                    });


                } catch (error) {
                    console.error("Error fetching curriculum:", error);
                    container.innerHTML = '<p style="color:red;">কারিকুলাম লোড করার সময় একটি সমস্যা হয়েছে।</p>';
                }

            }

            function showCurriculumPage(courseName, batch) {
                document.getElementById('curriculum-course-title').textContent = `${courseName} - ব্যাচ ${batch}`;
                switchDashboardPage('course-curriculum-page');
                fetchAndDisplayCurriculum(courseName, batch);
            }

            async function displayLiveClasses() {
                const container = document.getElementById('live-class-schedule-container');
                const user = auth.currentUser;
                if (!user || !container) return;

                container.innerHTML = '<p>আপনার ক্লাস শিডিউল লোড হচ্ছে...</p>';

                try {
                    const enrollmentsSnapshot = await db.collection('enrollments').where('studentUid', '==', user.uid).get();

                    if (enrollmentsSnapshot.empty) {
                        container.innerHTML = '<p>আপনি কোনো কোর্সে এনরোল করেননি, তাই কোনো ক্লাস শিডিউল নেই।</p>';
                        return;
                    }

                    let finalHTML = '';
                    let classFound = false;

                    for (const enrollmentDoc of enrollmentsSnapshot.docs) {
                        const enrollment = enrollmentDoc.data();
                        const { courseName, batch } = enrollment;

                        const classesSnapshot = await db.collection('joinClass')
                            .where('courseName', '==', courseName)
                            .where('batch', '==', batch)
                            .orderBy('dateTime', 'desc')
                            .get();

                        if (!classesSnapshot.empty) {
                            classFound = true;
                            finalHTML += `<h3 style="color:var(--primary-blue); margin-bottom:15px;">${courseName} - ব্যাচ ${batch}</h3>`;
                            let tableHTML = `
                                <table class="class-schedule-table">
                                    <thead>
                                        <tr><th>ক্লাস নং</th><th>টপিক</th><th>তারিখ ও সময়</th><th>স্ট্যাটাস</th><th>যোগদান</th></tr>
                                    </thead>
                                    <tbody>
                            `;

                            classesSnapshot.forEach(classDoc => {
                                const liveClass = classDoc.data();
                                const classTime = liveClass.dateTime.toDate();
                                const now = new Date();

                                const formattedTime = new Intl.DateTimeFormat('bn-BD', {
                                    year: 'numeric', month: 'long', day: 'numeric',
                                    weekday: 'long', hour: 'numeric', minute: 'numeric', hour12: true
                                }).format(classTime);

                                let statusTag = '';
                                let joinButton = '-';
                                const minutesDifference = (classTime - now) / (1000 * 60);

                                if (now > classTime) {
                                     statusTag = '<span class="status-tag status-completed">সম্পন্ন</span>';
                                } else {
                                    statusTag = '<span class="status-tag status-upcoming">আসন্ন</span>';
                                    if (minutesDifference <= 15) {
                                       joinButton = `<a href="${liveClass.link}" target="_blank" class="btn btn-gradient">এখন জয়েন করুন</a>`;
                                    } else {
                                       joinButton = 'সময় হয়নি';
                                    }
                                }

                                tableHTML += `
                                    <tr>
                                        <td>${liveClass.classNumber}</td>
                                        <td>${liveClass.topic}</td>
                                        <td>${formattedTime}</td>
                                        <td>${statusTag}</td>
                                        <td>${joinButton}</td>
                                    </tr>
                                `;
                            });

                            tableHTML += '</tbody></table><br><hr style="margin: 20px 0;"><br>';
                            finalHTML += tableHTML;
                        }
                    }

                    if (!classFound) {
                        container.innerHTML = '<p>আপনার কোর্সের জন্য এখনো কোনো ক্লাস শিডিউল করা হয়নি।</p>';
                    } else {
                        container.innerHTML = finalHTML;
                    }

                } catch (error) {
                    console.error("Error fetching live classes: ", error);
                    container.innerHTML = '<p style="color: red;">ক্লাস শিডিউল লোড করার সময় একটি সমস্যা হয়েছে। অনুগ্রহ করে Console চেক করুন এবং Firestore Index তৈরি করুন।</p>';
                }
            }

            function switchDashboardPage(targetPageId) {
                dashboardPages.forEach(page => page.classList.add('hidden'));
                const targetPage = document.getElementById(targetPageId);
                if (targetPage) {
                    targetPage.classList.remove('hidden');
                }
                sidebarMenuItems.forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('data-page') === targetPageId) {
                        item.classList.add('active');
                    }
                });
                
                if (targetPageId === 'course-curriculum-page') {
                     document.querySelector('#sidebar-menu li[data-page="my-courses-page"]').classList.add('active');
                }

                if (targetPageId === 'my-profile-page') {
                    populateProfileForm();
                }
                if (targetPageId === 'my-courses-page') {
                    displayMyCourses();
                }
                if (targetPageId === 'class-joining-page') {
                    displayLiveClasses();
                }
            }

            function startCountdown() {
                const countdownDate = new Date().getTime() + (2 * 24 * 60 * 60 * 1000 + 5 * 60 * 60 * 1000);
                const timerInterval = setInterval(function() {
                    const now = new Date().getTime();
                    const distance = countdownDate - now;
                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    document.getElementById('days').innerHTML = `${days.toString().padStart(2, '0')}<span>দিন</span>`;
                    document.getElementById('hours').innerHTML = `${hours.toString().padStart(2, '0')}<span>ঘণ্টা</span>`;
                    document.getElementById('minutes').innerHTML = `${minutes.toString().padStart(2, '0')}<span>মিনিট</span>`;
                    document.getElementById('seconds').innerHTML = `${seconds.toString().padStart(2, '0')}<span>সেকেন্ড</span>`;

                    if (distance < 0) {
                        clearInterval(timerInterval);
                        document.getElementById('timer').innerHTML = "ক্লাস শুরু হয়েছে!";
                    }
                }, 1000);
            }

            function handleScroll() {
                if (window.scrollY > 300) {
                    scrollTopBtn.classList.add('show');
                } else {
                    scrollTopBtn.classList.remove('show');
                }
            }

            function scrollToTop() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            const searchInput = document.getElementById('course-search-input');

            function filterCourses() {
                const searchTerm = searchInput.value.toLowerCase().trim();
                const allCourseCards = document.querySelectorAll('#courses-container .course-card');
                const courseGrid = document.querySelector('#courses-container');
                let courseFound = false;

                allCourseCards.forEach(card => {
                    const titleElement = card.querySelector('h3');
                    if (titleElement) {
                        const title = titleElement.textContent.toLowerCase();
                        if (title.includes(searchTerm)) {
                            card.style.display = '';
                            courseFound = true;
                        } else {
                            card.style.display = 'none';
                        }
                    }
                });

                let notFoundMessage = courseGrid.querySelector('.no-results');
                if (!courseFound && searchTerm) {
                    if (!notFoundMessage) {
                        notFoundMessage = document.createElement('p');
                        notFoundMessage.className = 'no-results';
                        notFoundMessage.textContent = 'আপনার সার্চের সাথে মিলে এমন কোনো কোর্স পাওয়া যায়নি।';
                        notFoundMessage.style.textAlign = 'center';
                        notFoundMessage.style.fontSize = '1.1em';
                        notFoundMessage.style.gridColumn = '1 / -1';
                        courseGrid.appendChild(notFoundMessage);
                    }
                } else {
                    if (notFoundMessage) {
                        notFoundMessage.remove();
                    }
                }
            }

            function handleBuyNowClick(event) {
                event.preventDefault();
                if (auth.currentUser) {
                    const button = event.currentTarget;
                    const itemName = button.dataset.name;
                    const itemPrice = button.dataset.price;
                    const userEmail = auth.currentUser.email;

                    document.getElementById('payment-course-name-display').textContent = itemName;
                    document.getElementById('payment-amount-display').textContent = `৳ ${itemPrice}`;
                    document.getElementById('payment-course-name').value = itemName;
                    document.getElementById('payment-amount').value = itemPrice;
                    document.getElementById('payment-email').value = userEmail;

                    paymentModal.classList.remove('hidden');
                } else {
                    showLoginModal();
                }
            }

            function handlePaymentSubmit(event) {
                event.preventDefault();
                const user = auth.currentUser;
                if (!user) {
                    showToast("এই কাজটি করার জন্য আপনাকে লগইন করতে হবে।", "error");
                    return;
                }

                const submitBtn = paymentForm.querySelector('button[type="submit"]');
                submitBtn.disabled = true;
                submitBtn.textContent = 'সাবমিট হচ্ছে...';

                const paymentData = {
                    userId: user.uid,
                    userEmail: document.getElementById('payment-email').value,
                    itemName: document.getElementById('payment-course-name').value,
                    amount: parseFloat(document.getElementById('payment-amount').value),
                    paymentMethod: document.getElementById('payment-account-type').value,
                    transactionId: document.getElementById('payment-trx-id').value,
                    status: 'pending',
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                };

                if (!paymentData.transactionId.trim()) {
                    showToast("অনুগ্রহ করে TrxID দিন।", "error");
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = 'পেমেন্ট ভেরিফাই করুন →';
                    return;
                }

                db.collection('payments').add(paymentData)
                    .then(() => {
                        db.collection('notifications').add({
                            title: 'নতুন পেমেন্ট',
                            message: `${paymentData.userEmail} ${paymentData.amount} টাকার একটি পেমেন্ট (${paymentData.itemName}) জমা দিয়েছেন।`,
                            timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                            type: 'new_payment',
                            read: false
                        });

                        showToast("আপনার পেমেন্ট তথ্য ভেরিফাই করা হচ্ছে দয়া করে অল্প সময় সময় অপেক্ষা করুন।", "success");
                        paymentForm.reset();
                        paymentModal.classList.add('hidden');
                    })
                    .catch(error => {
                        console.error("Error writing document: ", error);
                        showToast("তথ্য জমা দেওয়ার সময় একটি সমস্যা হয়েছে।", "error");
                    })
                    .finally(() => {
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = 'সাবমিট করুন →';
                    });
            }

            function handleProfileImageUpload(event) {
                const file = event.target.files[0];
                const user = auth.currentUser;
                const uploadIcon = document.querySelector('.avatar-upload-label .material-symbols-outlined');

                if (!file) return;
                if (!user) {
                    showToast("আপলোড করার জন্য আপনাকে লগইন করতে হবে।", "error");
                    return;
                }

                showToast("ছবি আপলোড হচ্ছে...", "info");
                const originalSrc = profilePageAvatar.src;
                profilePageAvatar.style.opacity = '0.5';
                if (uploadIcon) {
                    uploadIcon.textContent = 'progress_activity';
                    uploadIcon.classList.add('upload-in-progress');
                }

                const formData = new FormData();
                formData.append('key', IMGBB_API_KEY);
                formData.append('image', file);

                fetch("https://api.imgbb.com/1/upload", {
                    method: 'POST',
                    body: formData,
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`সার্ভার এরর: ${response.status}`);
                    }
                    return response.json();
                })
                .then(result => {
                    if (result.success) {
                        const imageUrl = result.data.url;
                        return db.collection('users').doc(user.uid).update({
                            photoURL: imageUrl
                        }).then(() => imageUrl);
                    } else {
                        throw new Error(result.error.message || 'ImgBB API থেকে একটি অজানা সমস্যা হয়েছে।');
                    }
                })
                .then((newImageUrl) => {
                    profilePageAvatar.src = newImageUrl;
                    headerAvatar.src = newImageUrl;
                    sidebarAvatar.src = newImageUrl;
                    showToast("প্রোফাইল ছবি সফলভাবে আপডেট করা হয়েছে!", "success");
                })
                .catch(error => {
                    console.error('Image Upload Error:', error);
                    showToast(`ছবি আপলোডে সমস্যা: ${error.message}`, "error");
                    profilePageAvatar.src = originalSrc;
                })
                .finally(() => {
                    profilePageAvatar.style.opacity = '1';
                    if (uploadIcon) {
                        uploadIcon.textContent = 'edit';
                        uploadIcon.classList.remove('upload-in-progress');
                    }
                    event.target.value = null;
                });
            }

            // --- Event Listeners ---
            loginSignupBtn.addEventListener('click', showLoginModal);
            
            // Close modals with close button or by clicking outside
            document.querySelectorAll('.login-modal').forEach(modal => {
                modal.addEventListener('click', (e) => { 
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            });
            document.querySelectorAll('.close-modal-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    btn.closest('.login-modal').classList.add('hidden');
                });
            });

            showSignupBtn.addEventListener('click', (e) => { e.preventDefault(); showSignupModal(); });
            showLoginBtn.addEventListener('click', (e) => { e.preventDefault(); showLoginModal(); });
            
            forgotPasswordLink.addEventListener('click', (e) => { e.preventDefault(); showForgotPasswordModal(); });
            backToLoginLink.addEventListener('click', (e) => { e.preventDefault(); showLoginModal(); });
            forgotPasswordForm.addEventListener('submit', handlePasswordResetRequest);


            passwordToggle.addEventListener('click', togglePassword);

            loginForm.addEventListener('submit', handleLogin);
            signupForm.addEventListener('submit', handleSignup);

            profileUpdateForm.addEventListener('submit', handleProfileUpdate);
            
            notificationIcon.addEventListener('click', () => {
                notificationDropdown.classList.toggle('hidden');
                profileDropdown.style.display = 'none';
                notificationBadge.classList.add('hidden');
            });

            profileIcon.addEventListener('click', () => {
                profileDropdown.style.display = profileDropdown.style.display === 'block' ? 'none' : 'block';
                 notificationDropdown.classList.add('hidden');
            });

            document.addEventListener('click', (e) => {
                if (!profileIcon.contains(e.target) && !profileDropdown.contains(e.target)){
                    profileDropdown.style.display = 'none';
                }
                 if (!notificationIcon.contains(e.target) && !notificationDropdown.contains(e.target)){
                    notificationDropdown.classList.add('hidden');
                }
            });

            dashboardLink.addEventListener('click', (e) => {
                e.preventDefault();
                mainContent.classList.add('hidden');
                dashboardContent.classList.remove('hidden');
                switchDashboardPage('my-courses-page');
                profileDropdown.style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            myProfileLink.addEventListener('click', (e) => {
                e.preventDefault();
                mainContent.classList.add('hidden');
                dashboardContent.classList.remove('hidden');
                switchDashboardPage('my-profile-page');
                profileDropdown.style.display = 'none';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            logoutBtn.addEventListener('click', handleLogout);

            sidebarMenuItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    switchDashboardPage(pageId);
                });
            });
            
            backToMyCoursesBtn.addEventListener('click', (e) => {
                e.preventDefault();
                switchDashboardPage('my-courses-page');
            });

            mainNavLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    if (!this.closest('.dropdown-menu')) {
                        e.preventDefault();
                        const targetId = this.getAttribute('href').substring(1);
                        showPageSection(targetId);
                    }
                });
            });

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    if (targetId) {
                        showPageSection(targetId);
                    }
                });
            });

            logoLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPageSection('home');
                searchInput.value = '';
                filterCourses();
            });

            internalLinkButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    showPageSection(targetId);
                });
            });

            searchInput.addEventListener('input', () => {
                showPageSection('courses');
                filterCourses();
            });

            window.addEventListener('scroll', handleScroll);
            scrollTopBtn.addEventListener('click', scrollToTop);

            paymentForm.addEventListener('submit', handlePaymentSubmit);

            copyPaymentNumberBtn.addEventListener('click', () => {
                navigator.clipboard.writeText(document.getElementById('payment-number').textContent)
                    .then(() => showToast('নম্বরটি সফলভাবে কপি করা হয়েছে!', 'success'))
                    .catch(err => showToast('কপি করতে সমস্যা হয়েছে।', 'error'));
            });

            if (profileImageUpload) {
                profileImageUpload.addEventListener('change', handleProfileImageUpload);
            }

            // --- Initializations ---
            startCountdown();
            switchDashboardPage('my-courses-page');

            // START: CALLING ALL DATA DISPLAY FUNCTIONS ON PAGE LOAD
            displayServices();
            displayCourses();
            displayNotices();
            displayTrustScreenshots(); // NEW
            loadHeroImage();
            loadAboutUsImage();
            loadHeaderLogo();
            // END: CALLING ALL DATA DISPLAY FUNCTIONS ON PAGE LOAD
        });
    </script>
</body>
</html>
